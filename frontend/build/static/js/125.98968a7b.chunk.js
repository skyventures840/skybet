"use strict";(self.webpackChunkween_sports_betting=self.webpackChunkween_sports_betting||[]).push([[125],{125:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(9379),o=s(5043),i=s(6305),n=s(579);const r=()=>{const[e,t]=(0,o.useState)([]),[s,a]=(0,o.useState)(0),[r,c]=(0,o.useState)(null);(0,o.useEffect)(()=>{try{const e=localStorage.getItem("cache:/admin/hero");if(e){const s=JSON.parse(e),a=(null===s||void 0===s?void 0:s.data)||[];Array.isArray(a)&&a.length>0&&t(a)}}catch(e){}},[]),(0,o.useEffect)(()=>{(async()=>{try{const e=await i.A.getHeroSlides();t(e.data)}catch(e){c("Failed to load hero slides")}})()},[]),(0,o.useEffect)(()=>{if(0===e.length)return;const t=setInterval(()=>{a(t=>(t+1)%e.length)},5e3);return()=>clearInterval(t)},[e.length]);return r?(0,n.jsx)("div",{className:"hero-slider",children:(0,n.jsx)("div",{className:"slider-container",children:(0,n.jsx)("p",{children:r})})}):0===e.length?(0,n.jsx)("div",{className:"hero-slider",children:(0,n.jsx)("div",{className:"slider-container",children:(0,n.jsx)("p",{children:"No hero slides available."})})}):(0,n.jsx)("div",{className:"hero-slider",children:(0,n.jsxs)("div",{className:"slider-container",children:[(0,n.jsx)("div",{className:"slides-wrapper",style:{transform:"translateX(-".concat(100*s,"%)")},children:e.map((e,t)=>(0,n.jsxs)("div",{className:"slide",children:[(0,n.jsxs)("div",{className:"slide-background",children:[(0,n.jsx)("img",{src:e.image,alt:e.caption1}),(0,n.jsx)("div",{className:"slide-overlay"})]}),(0,n.jsxs)("div",{className:"slide-content",children:[(0,n.jsx)("h2",{className:"slide-title",children:e.caption1}),(0,n.jsx)("p",{className:"slide-subtitle",children:e.caption2}),(0,n.jsx)("a",{href:e.buttonUrl,target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("button",{className:"slide-cta",children:e.buttonText})})]})]},e._id||e.id||t))}),(0,n.jsx)("button",{className:"slider-btn prev-btn",onClick:()=>{a(t=>(t-1+e.length)%e.length)},children:"\u2039"}),(0,n.jsx)("button",{className:"slider-btn next-btn",onClick:()=>{a(t=>(t+1)%e.length)},children:"\u203a"}),(0,n.jsx)("div",{className:"slider-dots",children:e.map((e,t)=>(0,n.jsx)("button",{className:"dot ".concat(t===s?"active":""),onClick:()=>(e=>{a(e)})(t)},t))})]})})};var c=s(4194),l=s(9456),d=s(3533),h=s(1816),m=s(4167);const u=e=>{let{matches:t}=e;const s=(0,l.wA)(),a=(0,o.useRef)(null),[i,r]=(0,o.useState)([]);(0,o.useEffect)(()=>{t&&t.length>0?r(t):r([])},[t]);return i&&0!==i.length?(0,n.jsx)("div",{className:"popular-matches-section",children:(0,n.jsxs)("div",{className:"popular-matches-box",children:[(0,n.jsx)("div",{className:"popular-matches-header",children:(0,n.jsx)("h2",{className:"popular-matches-title",children:"Popular Matches"})}),(0,n.jsx)("button",{className:"slider-btn prev-btn popular-slider-btn",onClick:()=>{a.current&&a.current.scrollBy({left:-220,behavior:"smooth"})},title:"Scroll left",children:"\u2039"}),(0,n.jsx)("button",{className:"slider-btn next-btn popular-slider-btn",onClick:()=>{a.current&&a.current.scrollBy({left:220,behavior:"smooth"})},title:"Scroll right",children:"\u203a"}),(0,n.jsx)("div",{className:"popular-matches-scroll",ref:a,children:i.map(e=>{const t=e.sport||e.sport_title||"",a=e.sport_key||t,o=e.country||e.subcategory||"",i=e.league||e.competition||e.tournament||"",r=e.fullLeagueTitle||(0,m.k)({sportKeyOrName:a,country:o,leagueName:i,fallbackSportTitle:e.sport_title||e.sport||""});return(0,n.jsxs)("div",{className:"popular-match-card",children:[(0,n.jsx)("div",{className:"match-league",children:r}),(0,n.jsx)("div",{className:"match-time",children:(()=>{const t=e.startTime?new Date(e.startTime):null,s=t?t.toLocaleDateString():"",a=t?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):e.time||"";return(0,n.jsxs)("span",{children:[s," ",a]})})()}),(0,n.jsxs)("div",{className:"match-teams-container",children:[(0,n.jsx)("span",{className:"team-name",children:e.homeTeam}),(0,n.jsx)("span",{className:"vs",children:"vs"}),(0,n.jsx)("span",{className:"team-name",children:e.awayTeam})]}),(0,n.jsx)("div",{className:"match-odds",children:["1","X","2"].map(t=>{const a=e.odds[t];if(void 0===a||a<=0)return null;const o=(0,h.G1)(e,a,t);return o.shouldDisable?(0,n.jsx)(d.A,{riskAssessment:o,className:"odds-button"},t):(0,n.jsxs)("button",{className:"odds-button popular-odds-button",onClick:()=>((e,t,a)=>{const o=!(null===e||void 0===e||!e.startTime),i=o?new Date(e.startTime):null;if(o&&i<=new Date)return void console.warn("Cannot add started match to betslip:",null===e||void 0===e?void 0:e.homeTeam,"vs",null===e||void 0===e?void 0:e.awayTeam);const n={matchId:e.id||e._id,match:"".concat(e.homeTeam," vs ").concat(e.awayTeam),homeTeam:e.homeTeam,awayTeam:e.awayTeam,league:e.league,startTime:e.startTime,type:t,odds:a,stake:0,sport:e.sport};s({type:"activeBets/addBet",payload:n})})(e,t,a),children:[(0,n.jsx)("div",{className:"odds-header",children:t}),(0,n.jsx)("div",{className:"odds-value",children:null!==a&&void 0!==a&&a.toFixed?a.toFixed(2):a})]},t)})})]},e.id||e._id)})})]})}):(0,n.jsx)("div",{className:"popular-matches-section",children:(0,n.jsxs)("div",{className:"popular-matches-box",children:[(0,n.jsx)("div",{className:"popular-matches-header",children:(0,n.jsx)("h2",{className:"popular-matches-title",children:"Popular Matches"})}),(0,n.jsxs)("div",{className:"popular-matches-empty",children:[(0,n.jsx)("p",{children:"No popular matches available at the moment."}),(0,n.jsx)("p",{children:"Check back later for trending matches!"})]})]})})},g=[{key:"Soccer",name:"Soccer",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"42",height:"42","aria-hidden":"true",children:[(0,n.jsx)("circle",{cx:"24",cy:"24",r:"22",fill:"#ffffff",stroke:"#222",strokeWidth:"2"}),(0,n.jsx)("polygon",{points:"24,12 18,18 20,26 28,26 30,18",fill:"#3b3b3b"}),(0,n.jsx)("polygon",{points:"12,24 18,18 14,12 8,14 6,20",fill:"#3b3b3b"}),(0,n.jsx)("polygon",{points:"36,24 30,18 34,12 40,14 42,20",fill:"#3b3b3b"}),(0,n.jsx)("polygon",{points:"20,36 18,28 10,28 12,34 16,36",fill:"#3b3b3b"}),(0,n.jsx)("polygon",{points:"28,36 30,28 38,28 36,34 32,36",fill:"#3b3b3b"})]})},{key:"Hockey",name:"Hockey",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"32",height:"32","aria-hidden":"true",children:[(0,n.jsx)("rect",{x:"8",y:"30",width:"32",height:"6",rx:"3",fill:"#607d8b"}),(0,n.jsx)("rect",{x:"26",y:"12",width:"4",height:"18",fill:"#8d6e63"}),(0,n.jsx)("rect",{x:"16",y:"20",width:"4",height:"10",fill:"#8d6e63"})]})},{key:"Tennis",name:"Tennis",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"32",height:"32","aria-hidden":"true",children:[(0,n.jsx)("circle",{cx:"24",cy:"24",r:"18",fill:"#8bc34a"}),(0,n.jsx)("path",{d:"M10 20c8 0 12 8 28 8",stroke:"#fff",strokeWidth:"3",fill:"none"}),(0,n.jsx)("path",{d:"M14 28c8 0 12-8 24-8",stroke:"#fff",strokeWidth:"3",fill:"none"})]})},{key:"Basketball",name:"Basketball",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"32",height:"32","aria-hidden":"true",children:[(0,n.jsx)("circle",{cx:"24",cy:"24",r:"18",fill:"#f57c00"}),(0,n.jsx)("path",{d:"M24 6v36",stroke:"#5d4037",strokeWidth:"3"}),(0,n.jsx)("path",{d:"M6 24h36",stroke:"#5d4037",strokeWidth:"3"}),(0,n.jsx)("path",{d:"M12 12c8 8 8 16 0 24",stroke:"#5d4037",strokeWidth:"3",fill:"none"}),(0,n.jsx)("path",{d:"M36 12c-8 8-8 16 0 24",stroke:"#5d4037",strokeWidth:"3",fill:"none"})]})},{key:"Baseball",name:"Baseball",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"32",height:"32","aria-hidden":"true",children:[(0,n.jsx)("circle",{cx:"24",cy:"24",r:"18",fill:"#ffffff",stroke:"#bdbdbd",strokeWidth:"2"}),(0,n.jsx)("path",{d:"M12 16c4 4 4 12 0 16",stroke:"#d32f2f",strokeWidth:"2",fill:"none"}),(0,n.jsx)("path",{d:"M36 16c-4 4-4 12 0 16",stroke:"#d32f2f",strokeWidth:"2",fill:"none"})]})},{key:"American Football",name:"Football (US)",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"32",height:"32","aria-hidden":"true",children:[(0,n.jsx)("ellipse",{cx:"24",cy:"24",rx:"18",ry:"12",fill:"#6d4c41"}),(0,n.jsx)("path",{d:"M14 24h20",stroke:"#fff",strokeWidth:"3"}),(0,n.jsx)("path",{d:"M18 20v8M22 20v8M26 20v8M30 20v8",stroke:"#fff",strokeWidth:"2"})]})},{key:"Cricket",name:"Cricket",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"32",height:"32","aria-hidden":"true",children:[(0,n.jsx)("circle",{cx:"16",cy:"24",r:"8",fill:"#c62828"}),(0,n.jsx)("rect",{x:"26",y:"12",width:"4",height:"20",fill:"#a1887f"}),(0,n.jsx)("rect",{x:"32",y:"12",width:"4",height:"20",fill:"#a1887f"})]})},{key:"Rugby",name:"Rugby",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"32",height:"32","aria-hidden":"true",children:[(0,n.jsx)("ellipse",{cx:"24",cy:"24",rx:"18",ry:"12",fill:"#8e24aa"}),(0,n.jsx)("path",{d:"M10 20c10 6 18 6 28 0",stroke:"#fff",strokeWidth:"2",fill:"none"})]})},{key:"MMA",name:"MMA",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"32",height:"32","aria-hidden":"true",children:[(0,n.jsx)("rect",{x:"12",y:"12",width:"24",height:"24",rx:"6",fill:"#3949ab"}),(0,n.jsx)("path",{d:"M18 18h12v12H18z",fill:"#283593"})]})},{key:"Boxing",name:"Boxing",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"32",height:"32","aria-hidden":"true",children:[(0,n.jsx)("circle",{cx:"18",cy:"28",r:"8",fill:"#e53935"}),(0,n.jsx)("circle",{cx:"30",cy:"20",r:"8",fill:"#e53935"})]})},{key:"Volleyball",name:"Volleyball",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"32",height:"32","aria-hidden":"true",children:[(0,n.jsx)("circle",{cx:"24",cy:"24",r:"18",fill:"#fff59d",stroke:"#fbc02d",strokeWidth:"2"}),(0,n.jsx)("path",{d:"M12 12c12 0 18 6 24 12",stroke:"#fbc02d",strokeWidth:"2",fill:"none"}),(0,n.jsx)("path",{d:"M10 26c10 0 16-6 26-6",stroke:"#fbc02d",strokeWidth:"2",fill:"none"})]})},{key:"Table tennis",name:"Table Tennis",icon:(0,n.jsxs)("svg",{viewBox:"0 0 48 48",width:"32",height:"32","aria-hidden":"true",children:[(0,n.jsx)("circle",{cx:"18",cy:"26",r:"10",fill:"#7e57c2"}),(0,n.jsx)("rect",{x:"26",y:"18",width:"10",height:"4",fill:"#6d4c41"}),(0,n.jsx)("circle",{cx:"34",cy:"20",r:"3",fill:"#ff7043"})]})}],b=e=>{let{onSelectSport:t,activeSport:s}=e;const a=e=>{"function"===typeof t&&t(e)};return(0,n.jsx)("div",{className:"sports-strip","aria-label":"Browse sports",children:g.map(e=>(0,n.jsxs)("div",{className:"sport-card ".concat(s===e.key?"active":""),role:"button",tabIndex:0,onClick:()=>a(e.key),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||a(e.key)},"aria-pressed":s===e.key,children:[(0,n.jsx)("div",{className:"sport-icon",children:e.icon}),(0,n.jsx)("div",{className:"sport-label",children:e.name})]},e.key))})};var p=s(1333);const f=new class{constructor(){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.isConnected=!1,this.subscribers=new Map,this.heartbeatInterval=null,this.heartbeatTimeout=null}connect(){try{const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000"}.REACT_APP_WS_URL||"ws://localhost:10000/ws/odds";console.log("[ODDS WS] Connecting to:",e),this.ws=new WebSocket(e),this.ws.onopen=this.handleOpen.bind(this),this.ws.onmessage=this.handleMessage.bind(this),this.ws.onclose=this.handleClose.bind(this),this.ws.onerror=this.handleError.bind(this)}catch(e){console.error("[ODDS WS] Connection error:",e),this.scheduleReconnect()}}handleOpen(){console.log("[ODDS WS] Connected successfully"),this.isConnected=!0,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.startHeartbeat(),this.notifySubscribers("connection",{status:"connected"})}handleMessage(e){try{const t=JSON.parse(e.data);switch(t.type){case"odds_update":this.handleOddsUpdate(t);break;case"match_status":this.handleMatchStatus(t);break;case"heartbeat":this.handleHeartbeat();break;default:console.log("[ODDS WS] Unknown message type:",t.type)}}catch(t){console.error("[ODDS WS] Error parsing message:",t)}}handleOddsUpdate(e){const{matchId:t,odds:s,timestamp:a}=e;console.log("[ODDS WS] Odds update for match ".concat(t,":"),s),this.notifySubscribers("odds_update",{matchId:t,odds:s,timestamp:a})}handleMatchStatus(e){const{matchId:t,status:s,score:a}=e;console.log("[ODDS WS] Status update for match ".concat(t,":"),{status:s,score:a}),this.notifySubscribers("match_status",{matchId:t,status:s,score:a})}handleHeartbeat(){this.heartbeatTimeout&&(clearTimeout(this.heartbeatTimeout),this.heartbeatTimeout=null)}handleClose(e){console.log("[ODDS WS] Connection closed:",e.code,e.reason),this.isConnected=!1,this.stopHeartbeat(),this.notifySubscribers("connection",{status:"disconnected"}),1e3!==e.code&&this.scheduleReconnect()}handleError(e){console.error("[ODDS WS] WebSocket error:",e),this.notifySubscribers("error",{error:e})}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return console.error("[ODDS WS] Max reconnection attempts reached"),void this.notifySubscribers("connection",{status:"failed"});this.reconnectAttempts++;const e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log("[ODDS WS] Reconnecting in ".concat(e,"ms (attempt ").concat(this.reconnectAttempts,")")),setTimeout(()=>{this.connect()},e)}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{this.isConnected&&this.ws.readyState===WebSocket.OPEN&&(this.ws.send(JSON.stringify({type:"heartbeat"})),this.heartbeatTimeout=setTimeout(()=>{console.warn("[ODDS WS] Heartbeat timeout, closing connection"),this.ws.close()},5e3))},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.heartbeatTimeout&&(clearTimeout(this.heartbeatTimeout),this.heartbeatTimeout=null)}subscribe(e,t){return this.subscribers.has(e)||this.subscribers.set(e,new Set),this.subscribers.get(e).add(t),()=>{const s=this.subscribers.get(e);s&&s.delete(t)}}notifySubscribers(e,t){const s=this.subscribers.get(e);s&&s.forEach(s=>{try{s(t)}catch(a){console.error("[ODDS WS] Error in subscriber callback for ".concat(e,":"),a)}})}disconnect(){this.ws&&(this.stopHeartbeat(),this.ws.close(1e3,"Client disconnect"),this.ws=null),this.isConnected=!1}getStatus(){return{isConnected:this.isConnected,reconnectAttempts:this.reconnectAttempts,subscriberCount:Array.from(this.subscribers.values()).reduce((e,t)=>e+t.size,0)}}send(e){this.isConnected&&this.ws.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify(e)):console.warn("[ODDS WS] Cannot send message, not connected")}},y=()=>{const[e,t]=(0,o.useState)("Featured"),[s,l]=(0,o.useState)([]),[d,h]=(0,o.useState)([]),[m,g]=(0,o.useState)([]),[y,v]=(0,o.useState)(!0),[x,S]=(0,o.useState)(null),[w,L]=(0,o.useState)(""),[j,T]=(0,o.useState)(""),[k,N]=(0,o.useState)(""),[E,A]=(0,o.useState)("");(0,o.useEffect)(()=>{const e=e=>{const{searchTerm:t}=e.detail;L(t)},t=e=>{const{selectedDate:t}=e.detail;T(t)};window.addEventListener("globalSearch",e),window.addEventListener("globalDateFilter",t);const s=localStorage.getItem("globalSearchTerm"),a=localStorage.getItem("globalSelectedDate");return s&&L(s),a&&T(a),()=>{window.removeEventListener("globalSearch",e),window.removeEventListener("globalDateFilter",t)}},[]),(0,o.useEffect)(()=>{const e=e=>{const t=e.detail.filter;console.log("[SIDEBAR FILTER] Applying filter: ".concat(t)),N(t)};return window.addEventListener("sidebarFilter",e),()=>window.removeEventListener("sidebarFilter",e)},[]),(0,o.useEffect)(()=>{const e=e=>{const{sport:t,subcategory:s}=e.detail;console.log("[FALLBACK] Filtering by subcategory: ".concat(s," in sport: ").concat(t)),A(s),N(t)};return window.addEventListener("subcategoryFilter",e),()=>window.removeEventListener("subcategoryFilter",e)},[]);const D={Soccer:["Soccer"],"American Football":["Football","american football","americanfootball","nfl","college football","ncaaf","cfl"],Hockey:["Hockey","NHL","KHL","AHL","SHL","Liiga","DEL","NLA"],NHL:["NHL"],KHL:["KHL"],AHL:["AHL"],SHL:["SHL"],Liiga:["Liiga"],DEL:["DEL"],NLA:["NLA"],Tennis:["Tennis","ATP","Wimbledon","US Open","French Open"],ATP:["ATP"],Wimbledon:["Wimbledon"],"US Open":["US Open"],"French Open":["French Open"],Baseball:["Baseball","MLB"],MLB:["MLB"]},C={Soccer:"soccer","American Football":"americanfootball",Basketball:"basketball",Baseball:"baseball",Tennis:"tennis","Ice Hockey":"icehockey",Hockey:"hockey",Cricket:"cricket",Boxing:"boxing",MMA:"mma",Volleyball:"volleyball",Rugby:"rugby","Rugby League":"rugbyleague","Aussie Rules":"aussierules",Handball:"handball","Table tennis":"tabletennis"},O={Soccer:[/\bboxing\b/i,/\bboxi\b/i,/\bmma\b/i,/\brugby\b/i],"American Football":[/\bsoccer\b/i,/\brugby\b/i],Basketball:[/\bice hockey\b/i,/\bhockey\b/i],"Ice Hockey":[/\bbasketball\b/i],Boxing:[/\bsoccer\b/i,/\bmma\b/i],MMA:[/\bsoccer\b/i,/\bboxing\b/i]},_={EPL:["Premier League","English Premier League","EPL","England Premier League"],Epl:["Premier League","English Premier League","EPL","England Premier League"],"Serie A":["Serie A","Italian Serie A","Italy Serie A"],Bundesliga:["Bundesliga","German Bundesliga","Germany Bundesliga"],"La Liga":["La Liga","Spanish La Liga","Spain La Liga"],"Ligue 1":["Ligue 1","French Ligue 1","France Ligue One"],"Champions League":["UEFA Champions League","Champions League","UCL"],"Europa League":["UEFA Europa League","Europa League","UEL"],MLS:["Major League Soccer","MLS"],NFL:["National Football League","NFL"],NCAAF:["NCAA Football","College Football","NCAAF"],CFL:["Canadian Football League","CFL"],NBA:["National Basketball Association","NBA"],EuroLeague:["EuroLeague","Euro League","Euroliga"],MLB:["Major League Baseball","MLB"],NHL:["National Hockey League","NHL"],KHL:["Kontinental Hockey League","KHL"],AHL:["American Hockey League","AHL"],SHL:["Swedish Hockey League","SHL"],Liiga:["Finnish Liiga","Liiga"],DEL:["Deutsche Eishockey Liga","DEL"],NLA:["National League A","NLA"],ATP:["Association of Tennis Professionals","ATP"],WTA:["Women\u2019s Tennis Association","WTA"],Wimbledon:["Wimbledon"],"US Open":["US Open","U.S. Open"],"French Open":["French Open","Roland Garros"]};(0,o.useEffect)(()=>{let e=s;if(k){const t=C[k];if(t){const s=O[k]||[];e=e.filter(e=>{const a=String(e.sport||"").toLowerCase().split("_")[0],o=String(e.league||"").toLowerCase(),i=String(e.subcategory||"").toLowerCase(),n=s.some(e=>e.test(o)||e.test(i));return a===t&&!n})}else{const t=D[k]||[k];e=e.filter(e=>t.some(t=>e.sport&&e.sport.toLowerCase().includes(t.toLowerCase())||e.league&&e.league.toLowerCase().includes(t.toLowerCase())||e.subcategory&&e.subcategory.toLowerCase().includes(t.toLowerCase())))}}if(E){const t=C[k],s=e=>String(e||"").toLowerCase().trim().replace(/[_.-]+/g," "),a=(_[E]||[E]).map(s);e=e.filter(e=>{const o=String(e.sport||"").toLowerCase().split("_")[0];if(t&&o!==t)return!1;const i=s(e.league),n=s(e.subcategory),r=s(e.sport_title);return a.some(e=>e&&(i===e||n===e||r===e))})}if(w.trim()){const t=w.toLowerCase();e=e.filter(e=>{var s,a,o,i,n;return(null===(s=e.homeTeam)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(a=e.awayTeam)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(o=e.league)||void 0===o?void 0:o.toLowerCase().includes(t))||(null===(i=e.sport)||void 0===i?void 0:i.toLowerCase().includes(t))||(null===(n=e.subcategory)||void 0===n?void 0:n.toLowerCase().includes(t))})}if(j){const t=new Date(j);t.setHours(0,0,0,0);const s=new Date(t);s.setDate(s.getDate()+1),e=e.filter(e=>{const a=new Date(e.startTime);return a>=t&&a<s})}const t=new Date;e=e.filter(e=>new Date(e.startTime)>=t),h(e);try{sessionStorage.setItem("home_filtered_data",JSON.stringify(e)),console.log("[HOME] Saved filtered matches data to session storage")}catch(a){console.log("[HOME] Failed to save filtered matches to session storage:",a)}},[s,w,j,k,E]);const M=e=>{const t=new Set,s=[];return e.forEach(e=>{const a=(e=>e?e.home_team&&e.away_team?"".concat(e.home_team,"_").concat(e.away_team,"_").concat(e.commence_time,"_").concat(e.sport_key):e.homeTeam&&e.awayTeam?"".concat(e.homeTeam,"_").concat(e.awayTeam,"_").concat(e.startTime,"_").concat(e.sport):null:null)(e);a&&!t.has(a)&&(t.add(a),s.push(e))}),console.log("[DEBUG] Deduplication: ".concat(e.length," matches -> ").concat(s.length," unique matches")),s},B=e=>{const t=e.map(e=>{if(!e)return null;const t=e=>{if(!e)return"";return e.split("_").map(e=>e.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")).join(".")};return{id:e._id||e.id,league:e.leagueId?t(e.leagueId):"",subcategory:e.sport?t(e.sport):"",startTime:new Date(e.startTime),homeTeam:e.homeTeam,awayTeam:e.awayTeam,homeTeamFlag:"\ud83c\udff3\ufe0f",awayTeamFlag:"\ud83c\udff3\ufe0f",odds:e.odds instanceof Map?Object.fromEntries(e.odds):e.odds||{},additionalMarkets:(e.markets||[]).length,sport:e.sport?e.sport.split("_")[0]:"",allMarkets:e.markets||[]}}).filter(e=>null!==e);return M(t)},H=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(S(null),v(!0),!e){const e=p.A.getCachedData("/matches");if(e){console.log("[HOME] Using cached matches data");const s=B(e.matches||[]);l(s);const a=new Date,o=s.filter(e=>Object.values(e.odds||{}).filter(e=>e>0).length>=2).filter(e=>new Date(e.startTime)>=a).slice(0,6).map(e=>({id:e.id||e._id,league:e.league||"",subcategory:e.subcategory||"",startTime:e.startTime,time:new Date(e.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),homeTeam:e.homeTeam,awayTeam:e.awayTeam,odds:e.odds||{},sport:e.sport||"",country:e.country||"",fullLeagueTitle:e.fullLeagueTitle||""})),i=M(o);g(i);try{sessionStorage.setItem("home_popular_data",JSON.stringify(i)),console.log("[HOME] Saved popular matches data to session storage")}catch(t){console.log("[HOME] Failed to save popular matches to session storage:",t)}return void v(!1)}}console.log("[HOME] Fetching fresh matches data..."),v(!0);const s=await i.A.getMatches();console.log("[DEBUG] API response received:",s);const a=s.data.matches||[];console.log("[DEBUG] Raw odds data:",a),console.log("[DEBUG] Number of matches in response:",a.length);const o=B(a);console.log("[DEBUG] Frontend received ".concat(o.length," matches")),o.length>0&&console.log("[DEBUG] First match sample:",o[0]),l(o);try{sessionStorage.setItem("home_matches_data",JSON.stringify(o)),console.log("[HOME] Saved matches data to session storage")}catch(t){console.log("[HOME] Failed to save matches to session storage:",t)}const n=new Date,r=o.filter(e=>Object.values(e.odds||{}).filter(e=>e>0).length>=2).filter(e=>new Date(e.startTime)>=n).slice(0,6).map(e=>({id:e.id||e._id,league:e.league||"",subcategory:e.subcategory||"",startTime:e.startTime,time:new Date(e.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),homeTeam:e.homeTeam,awayTeam:e.awayTeam,odds:e.odds||{},sport:e.sport||"",country:e.country||"",fullLeagueTitle:e.fullLeagueTitle||""})),c=M(r);g(c)}catch(s){console.error("Error fetching matches:",s),S("Failed to load matches. Please check your connection and try again."),console.log("[DEBUG] Primary API failed, attempting alternative data sources...");try{const e=await i.A.getAllMatches();if(e.data&&e.data.length>0){console.log("[DEBUG] Successfully fetched from alternative endpoint");const t=B(e.data);return l(t),g(t.slice(0,6)),void S(null)}}catch(a){console.log("[DEBUG] Alternative endpoints also failed:",a)}console.log("[DEBUG] All data sources failed, showing connection error"),l([]),g([]),S("Unable to connect to server. The server may be temporarily unavailable. Please try refreshing the page in a few moments.")}finally{v(!1)}};(0,o.useEffect)(()=>{const e=f.subscribe("odds_update",e=>{console.log("[HOME] Received odds update:",e),l(t=>t.map(t=>t.id===e.matchId||t._id===e.matchId?(0,a.A)((0,a.A)({},t),{},{odds:(0,a.A)((0,a.A)({},t.odds),e.odds)}):t)),g(t=>t.map(t=>t.id===e.matchId||t._id===e.matchId?(0,a.A)((0,a.A)({},t),{},{odds:(0,a.A)((0,a.A)({},t.odds),e.odds)}):t))}),t=f.subscribe("match_status",e=>{console.log("[HOME] Received match status update:",e),l(t=>t.map(t=>t.id===e.matchId||t._id===e.matchId?(0,a.A)((0,a.A)({},t),{},{status:e.status,score:e.score||t.score}):t)),g(t=>t.map(t=>t.id===e.matchId||t._id===e.matchId?(0,a.A)((0,a.A)({},t),{},{status:e.status,score:e.score||t.score}):t))});return f.connect(),()=>{e(),t(),f.disconnect()}},[]),(0,o.useEffect)(()=>{try{const e=sessionStorage.getItem("home_matches_data"),t=sessionStorage.getItem("home_popular_data"),s=sessionStorage.getItem("home_filtered_data");if(e&&t){console.log("[HOME] Restoring data from session storage for instant display");const a=JSON.parse(e),o=JSON.parse(t),i=s?JSON.parse(s):[];l(a),g(o),h(i),v(!1)}}catch(s){console.log("[HOME] No session storage data available")}try{const s=localStorage.getItem("cache:/matches");if(s){var e;const t=JSON.parse(s),a=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.matches)||[],o=B(a);o&&o.length>0&&l(o)}const a=localStorage.getItem("cache:/matches/popular/trending");if(a){var t;const e=JSON.parse(a),s=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.matches)||[],o=new Date,i=s.filter(e=>new Date(e.startTime)>=o).map(e=>({id:e.id||e._id,league:e.league||"",subcategory:e.subcategory||"",startTime:e.startTime,time:new Date(e.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),homeTeam:e.homeTeam,awayTeam:e.awayTeam,odds:e.odds||{},sport:e.sport||"",country:e.country||"",fullLeagueTitle:e.fullLeagueTitle||""})),n=M(i);n&&n.length>0&&g(n)}}catch(s){}H()},[]),(0,o.useEffect)(()=>{H();const e=setInterval(()=>{console.log("[DEBUG] Polling for updated matches data..."),H()},12e4);return()=>clearInterval(e)},[]),(0,o.useEffect)(()=>{if(x&&x.includes("Unable to connect to server")){console.log("[DEBUG] Connection error detected, scheduling retry...");const e=setTimeout(()=>{console.log("[DEBUG] Retrying connection..."),H()},1e4);return()=>clearTimeout(e)}},[x]),(0,o.useEffect)(()=>{const e=setInterval(()=>{F()},6e4);return()=>clearInterval(e)},[]),(0,o.useEffect)(()=>{const e=()=>{if("hidden"===document.visibilityState)try{s.length>0&&sessionStorage.setItem("home_matches_data",JSON.stringify(s)),m.length>0&&sessionStorage.setItem("home_popular_data",JSON.stringify(m)),d.length>0&&sessionStorage.setItem("home_filtered_data",JSON.stringify(d)),console.log("[HOME] Data preserved for navigation")}catch(e){console.log("[HOME] Failed to preserve data:",e)}};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[s,m,d]);const F=async()=>{try{console.log("[DEBUG] Fetching popular matches...");const e=(await i.A.getPopularMatches()).data.matches||[],t=new Date,s=e.filter(e=>new Date(e.startTime)>=t).map(e=>({id:e.id||e._id,league:e.league||"",subcategory:e.subcategory||"",startTime:e.startTime,time:new Date(e.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),homeTeam:e.homeTeam,awayTeam:e.awayTeam,odds:e.odds||{},sport:e.sport||"",country:e.country||"",fullLeagueTitle:e.fullLeagueTitle||""})),a=M(s);g(a)}catch(e){console.error("Error fetching popular matches:",e)}},I=(()=>{const e={},t={},s=e=>String(e||"").toLowerCase().trim().replace(/[_.-]+/g," ");return d.forEach(a=>{const o=(e=>{const t=s(e.league),a=s(e.subcategory);for(const[o,i]of Object.entries(_))for(const e of i){const i=s(e);if(i&&(t===i||a===i))return o}return e.league&&e.league.includes(".")?e.league.split(".").pop().trim():e.league?e.league:e.subcategory?e.subcategory:"Other"})(a);e[o]||(e[o]=[],t[o]=new Set);const i="".concat(a.homeTeam,"_").concat(a.awayTeam,"_").concat(a.startTime);t[o].has(i)||(t[o].add(i),e[o].push(a))}),Object.entries(e).forEach(e=>{let[t,s]=e;console.log('[DEBUG] Subcategory "'.concat(t,'": ').concat(s.length," unique matches"))}),e})();return console.log("Grouped matches:",Object.keys(I)),Object.entries(I).forEach(e=>{let[t,s]=e;console.log('Subcategory "'.concat(t,'": ').concat(s.length," matches"))}),x?(0,n.jsxs)("div",{className:"home-page",children:[(0,n.jsx)(r,{}),(0,n.jsx)("div",{className:"main-content",children:(0,n.jsxs)("div",{className:"error-container",children:[(0,n.jsx)("p",{className:"error-message",children:x}),(0,n.jsx)("button",{onClick:H,className:"retry-btn",children:"Retry"})]})})]}):(0,n.jsxs)("div",{className:"home-page",children:[(0,n.jsx)(r,{}),(0,n.jsxs)("div",{className:"main-content",children:[(0,n.jsx)(b,{onSelectSport:e=>{N(t=>t===e?"":e),A("")},activeSport:k}),(()=>{let e=m;const t=C[k];if(k)if(t)e=e.filter(e=>String(e.sport||"").toLowerCase().split("_")[0]===t);else{const t=D[k]||[k];e=e.filter(e=>t.some(t=>e.sport&&e.sport.toLowerCase().includes(t.toLowerCase())||e.league&&e.league.toLowerCase().includes(t.toLowerCase())||e.subcategory&&e.subcategory.toLowerCase().includes(t.toLowerCase())))}return(0,n.jsx)(u,{matches:e,loading:y})})(),(0,n.jsxs)("div",{className:"matches-section",children:[(0,n.jsxs)("div",{className:"section-header",children:[(0,n.jsx)("h2",{children:"Today's Matches"}),E&&(0,n.jsxs)("div",{className:"active-filter",children:[(0,n.jsxs)("span",{children:["Filtered by: ",E]}),(0,n.jsx)("button",{className:"clear-filter-btn",onClick:()=>A(""),children:"\u2715"})]}),(0,n.jsx)("div",{className:"tab-navigation",children:["Featured","Competitions","Outrights","Offers","Free Games"].map(s=>(0,n.jsx)("button",{className:"tab-btn ".concat(e===s?"active":""),onClick:()=>t(s),children:s},s))})]}),(0,n.jsx)("div",{className:"matches-container",children:Object.entries(I).length>0?Object.entries(I).map(e=>{let[t,s]=e;return(0,n.jsx)("div",{className:"competition-group",children:(0,n.jsx)("div",{className:"matches-list",children:s.map((e,t)=>(0,n.jsx)(c.A,{match:e,sport:e.sport,league:e.league,subcategory:e.subcategory,showLeagueHeader:0===t},e.id))})},t)}):(0,n.jsxs)("div",{className:"no-matches",children:[(0,n.jsx)("h3",{children:"No Matches Found"}),(0,n.jsx)("p",{children:"No matches match your current filters. Try adjusting your search criteria."})]})})]})]})]})}}}]);
//# sourceMappingURL=125.98968a7b.chunk.js.map