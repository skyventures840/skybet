(self.webpackChunkween_sports_betting=self.webpackChunkween_sports_betting||[]).push([[124],{6779:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>y});var t=n(9379),s=n(5043),c=n(9456),r=n(6305),i=n(8040),o=n(1614),l=n(3880);n(8970);function d(e,a){const[n="0",t=""]=String(null!==e&&void 0!==e?e:"0").split("."),s=(t+"0".repeat(a)).slice(0,a);return"".concat(n).concat(s).replace(/^0+/,"")||"0"}function u(e){let{currency:a,address:n,amount:t,memoTag:s}=e;const c=String(a||"").toUpperCase(),r=function(e){try{return l.bv(e)}catch(a){return e}}(String(n||""));if(!c||!r)return"";if("ETH"===c){const e=d(t,18);return"ethereum:".concat(r,"@1?value=").concat(e)}if("USDT"===c){const e="0xdAC17F958D2ee523a2206206994597C13D831ec7",a=d(t,6);return"ethereum:".concat(e,"@1/transfer?address=").concat(r,"&uint256=").concat(a)}if("USDC"===c){const e="0xA0b86991c6218b36c1d19D4a2e9eB0cE3606eB48",a=d(t,6);return"ethereum:".concat(e,"@1/transfer?address=").concat(r,"&uint256=").concat(a)}if("DAI"===c){const e="0x6B175474E89094C44Da98b954EedeAC495271d0F",a=d(t,18);return"ethereum:".concat(e,"@1/transfer?address=").concat(r,"&uint256=").concat(a)}if("LINK"===c){const e="0x514910771AF9Ca656af840dff83E8264EcF986CA",a=d(t,18);return"ethereum:".concat(e,"@1/transfer?address=").concat(r,"&uint256=").concat(a)}if("MATIC"===c){const e=d(t,18);return"ethereum:".concat(r,"@137?value=").concat(e)}if("BNB"===c){const e=d(t,18);return"ethereum:".concat(r,"@56?value=").concat(e)}if("AVAX"===c){const e=d(t,18);return"ethereum:".concat(r,"@43114?value=").concat(e)}if("BTC"===c)return"bitcoin:".concat(n,"?amount=").concat(t);if("LTC"===c)return"litecoin:".concat(n,"?amount=").concat(t);if("DASH"===c)return"dash:".concat(n,"?amount=").concat(t);if("ZEC"===c)return"zcash:".concat(n,"?amount=").concat(t);if("DOGE"===c)return"dogecoin:".concat(n,"?amount=").concat(t);if("TRX"===c)return"tron:".concat(n,"?amount=").concat(t);if("ADA"===c)return"cardano:".concat(n,"?amount=").concat(t);if("SOL"===c)return"solana:".concat(n,"?amount=").concat(t);if("DOT"===c)return"polkadot:".concat(n,"?amount=").concat(t);if("XMR"===c)return"monero:".concat(n,"?amount=").concat(t);if("XLM"===c)return"web+stellar:pay?destination=".concat(n,"&amount=").concat(t);if("XRP"===c){const e="ripple:".concat(n,"?amount=").concat(t);return s?"".concat(e,"&dt=").concat(s):e}return"".concat(c.toLowerCase(),":").concat(n,"?amount=").concat(t)}function m(e,a){return u({currency:a,address:e,amount:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,memoTag:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null})}const p=u;var h=n(579);const x=()=>{const[e,a]=(0,s.useState)(!1),[n,t]=(0,s.useState)(null),[c,i]=(0,s.useState)(!1),[l,d]=(0,s.useState)(""),[u,x]=(0,s.useState)("BTC"),[y,v]=(0,s.useState)(""),[f,j]=(0,s.useState)(null),[g,N]=(0,s.useState)(""),b=e=>{switch(e){case"waiting":return"#ffc107";case"confirming":return"#17a2b8";case"confirmed":case"finished":return"#28a745";case"failed":case"expired":return"#dc3545";default:return"#6c757d"}},w=e=>{switch(e){case"waiting":return"Waiting for payment";case"confirming":return"Payment confirming";case"confirmed":return"Payment confirmed";case"finished":return"Payment completed";case"failed":return"Payment failed";case"expired":return"Payment expired";default:return"Unknown status"}},C=(e,a)=>{navigator.clipboard.writeText(e).then(()=>{a&&(a.classList.add("copied"),a.textContent="\u2713 Copied!",setTimeout(()=>{a.classList.remove("copied"),a.textContent="Copy"},2e3))}).catch(e=>{console.error("Failed to copy: ",e)})};return c&&f?(0,h.jsx)("div",{className:"deposit-section",children:(0,h.jsxs)("div",{className:"payment-success",children:[(0,h.jsx)("h2",{children:"Payment Request Created"}),(0,h.jsxs)("div",{className:"payment-details",children:[(0,h.jsxs)("div",{className:"status-indicator",children:[(0,h.jsx)("div",{className:"status-dot",style:{backgroundColor:b(g)}}),(0,h.jsx)("span",{children:w(g)})]}),(0,h.jsxs)("div",{className:"payment-info",children:[(0,h.jsx)("h3",{children:"Payment Details"}),(0,h.jsxs)("div",{className:"info-grid",children:[(0,h.jsxs)("div",{className:"info-item",children:[(0,h.jsx)("label",{children:"Amount:"}),(0,h.jsxs)("span",{children:["$",f.priceAmount," USD"]})]}),(0,h.jsxs)("div",{className:"info-item",children:[(0,h.jsx)("label",{children:"Crypto Amount:"}),(0,h.jsxs)("span",{children:[f.payAmount," ",f.payCurrency]})]})]})]}),(0,h.jsxs)("div",{className:"wallet-section",children:[(0,h.jsx)("h3",{children:"Send Payment to:"}),(0,h.jsxs)("div",{className:"wallet-address-container",children:[(0,h.jsx)("input",{type:"text",value:f.payAddress,readOnly:!0,className:"wallet-address-input"}),(0,h.jsx)("button",{onClick:e=>C(f.payAddress,e.target),className:"copy-btn",children:"Copy"})]}),f.payinExtraId&&(0,h.jsxs)("div",{className:"extra-id-container",children:[(0,h.jsx)("label",{children:"Memo/Tag (Required):"}),(0,h.jsxs)("div",{className:"wallet-address-container",children:[(0,h.jsx)("input",{type:"text",value:f.payinExtraId,readOnly:!0,className:"wallet-address-input"}),(0,h.jsx)("button",{onClick:e=>C(f.payinExtraId,e.target),className:"copy-btn",children:"Copy"})]})]}),(0,h.jsxs)("div",{className:"qr-code-container",children:[(0,h.jsx)(o.Ay,{value:["BTC","ETH","XRP","XLM","USDT"].includes(String(f.payCurrency||"").toUpperCase())?m(f.payAddress,f.payCurrency,f.payAmount,f.payinExtraId):p({currency:f.payCurrency,address:f.payAddress,amount:f.payAmount,memoTag:f.payinExtraId}),size:220,level:"H",includeMargin:!0,renderAs:"svg"}),(0,h.jsxs)("div",{className:"qr-code-info",children:[(0,h.jsx)("p",{children:"Scan QR Code to Pay"}),(0,h.jsxs)("p",{children:["Send exactly ",f.payAmount," ",f.payCurrency]}),(0,h.jsx)("div",{className:"qr-code-scan-instruction",children:"Point your crypto wallet camera at this QR code"})]})]})]}),(0,h.jsx)("div",{className:"payment-actions",children:(0,h.jsx)("button",{onClick:()=>{j(null),i(!1),d(""),v("")},className:"new-payment-btn",children:"Create New Payment"})})]})]})}):(0,h.jsxs)("div",{className:"deposit-section",children:[(0,h.jsx)("h2",{children:"Cryptocurrency Deposit"}),(0,h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!l||parseFloat(l)<50)return void t("Minimum deposit amount is $50");a(!0),t(null);let s=0;const c=async()=>{try{return await r.A.createPayment({amount:parseFloat(l),currency:u,description:y||"Crypto deposit via ".concat(u)})}catch(n){var e;if(429===(null===(e=n.response)||void 0===e?void 0:e.status)&&s<3){s++;const e=1e3*Math.pow(2,s);return console.log("Rate limited, retrying in ".concat(e,"ms (attempt ").concat(s,"/").concat(3,")")),await new Promise(a=>setTimeout(a,e)),c()}throw n}};try{const e=await c();if(console.log("Payment response:",e),e.data&&e.data.success&&e.data.payment)j(e.data.payment),N(e.data.payment.paymentStatus),i(!0),e.data.payment.isMockPayment?t("Demo mode: This is a simulated payment for testing purposes. In production, you would send the exact amount to the provided address."):e.data.payment.isManualProcessing&&t("Payment service temporarily unavailable. Your request has been recorded and will be processed manually. Please contact support for assistance.");else{var o,d,m;const a=(null===(o=e.data)||void 0===o?void 0:o.details)||(null===(d=e.data)||void 0===d?void 0:d.error)||"Failed to create payment";t("".concat(a).concat(null!==(m=e.data)&&void 0!==m&&m.suggestion?" ".concat(e.data.suggestion):""))}}catch(n){var p;if(console.error("Payment creation error:",n),429===(null===(p=n.response)||void 0===p?void 0:p.status))t("Payment service is temporarily busy. Please wait a moment and try again. The system will automatically retry for you.");else if("ECONNREFUSED"===n.code||n.message.includes("Network Error")||!n.response)t("Unable to connect to payment service. Please check that the server is running and try again.");else{var h,x,v,f,g,b;const a=(null===(h=n.response)||void 0===h||null===(x=h.data)||void 0===x?void 0:x.details)||(null===(v=n.response)||void 0===v||null===(f=v.data)||void 0===f?void 0:f.error)||n.message||"Failed to create payment";t("".concat(a).concat(null!==(g=n.response)&&void 0!==g&&null!==(b=g.data)&&void 0!==b&&b.suggestion?" ".concat(n.response.data.suggestion):""))}}finally{a(!1)}},className:"crypto-deposit-form",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Select Cryptocurrency"}),(0,h.jsx)("select",{value:u,onChange:e=>x(e.target.value),className:"crypto-select",children:[{code:"BTC",name:"Bitcoin",icon:"\u20bf"},{code:"ETH",name:"Ethereum",icon:"\u039e"},{code:"USDT",name:"Tether (ERC20)",icon:"\u20ae"},{code:"USDTTRC20",name:"Tether (TRC20)",icon:"\u20ae"},{code:"USDC",name:"USD Coin",icon:"\uff04"},{code:"LTC",name:"Litecoin",icon:"\u0141"},{code:"XRP",name:"Ripple",icon:"\u2715"},{code:"DOGE",name:"Dogecoin",icon:"\xd0"},{code:"TRX",name:"Tron",icon:"TRX"},{code:"ADA",name:"Cardano",icon:"ADA"},{code:"SOL",name:"Solana",icon:"\u25ce"},{code:"MATIC",name:"Polygon",icon:"M"},{code:"BNB",name:"BNB (BSC)",icon:"BNB"},{code:"DOT",name:"Polkadot",icon:"DOT"},{code:"DAI",name:"Dai",icon:"\u25c8"},{code:"LINK",name:"Chainlink",icon:"\ud83d\udd17"},{code:"AVAX",name:"Avalanche",icon:"AVAX"},{code:"XMR",name:"Monero",icon:"XMR"},{code:"XLM",name:"Stellar",icon:"\u2605"},{code:"DASH",name:"Dash",icon:"D"},{code:"ZEC",name:"Zcash",icon:"Z"}].map(e=>(0,h.jsxs)("option",{value:e.code,children:[e.icon," ",e.name," (",e.code,")"]},e.code))})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Deposit Amount (USD)"}),(0,h.jsx)("input",{type:"number",value:l,onChange:e=>d(e.target.value),placeholder:"Enter amount in USD",min:"10",step:"0.01",required:!0,disabled:e}),(0,h.jsx)("small",{children:"Minimum deposit: $50 USD"})]}),n&&(0,h.jsx)("div",{className:"error-message",children:n}),(0,h.jsx)("button",{type:"submit",className:"deposit-btn",disabled:e||!l||parseFloat(l)<10,children:e?"Creating Payment...":"Create Payment"})]}),(0,h.jsxs)("div",{className:"deposit-info",children:[(0,h.jsx)("h3",{children:"How it works:"}),(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:"Enter the amount you want to deposit in USD"}),(0,h.jsx)("li",{children:"Select your preferred cryptocurrency"}),(0,h.jsx)("li",{children:"payment address will be generated"}),(0,h.jsx)("li",{children:"Send the exact crypto amount to the provided address"}),(0,h.jsx)("li",{children:"Your account will be credited once the payment is confirmed"})]})]})]})},y=()=>{const{user:e}=(0,c.d4)(e=>e.auth),a=(0,c.wA)(),[n,o]=(0,s.useState)("profile"),[l,d]=(0,s.useState)({username:"",email:"",firstName:"",lastName:"",phoneNumber:"",address:"",balance:0,lifetimeWinnings:0,createdAt:""}),[u,m]=(0,s.useState)(!0),[p,y]=(0,s.useState)(null),[v,f]=(0,s.useState)(""),[j,g]=(0,s.useState)("bitcoin"),[N,b]=(0,s.useState)("");(0,s.useEffect)(()=>{const n=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null;!e&&n&&n.token&&n.user&&a((0,i.gV)(n.user));(null===n||void 0===n?void 0:n.token)&&!l.username&&(async()=>{try{m(!0),y(null),console.log("Fetching user profile...");const e=await r.A.getUserProfile();let n;if(console.log("Profile API response:",e),n=e.data?e.data.user||e.data:e,console.log("Processed user data:",n),!n)throw new Error("No user data received from server");d({username:n.username||"",email:n.email||"",firstName:n.firstName||"",lastName:n.lastName||"",phoneNumber:n.phoneNumber||"",address:n.address||"",balance:n.balance||0,lifetimeWinnings:n.lifetimeWinnings||0,createdAt:n.createdAt||""}),a((0,i.gV)(n))}catch(t){var e,n;console.error("Failed to fetch profile:",t),y("Failed to load profile data: ".concat((null===(e=t.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error)||t.message))}finally{m(!1)}})()},[]);return(0,h.jsxs)("div",{className:"account-page",children:[(0,h.jsxs)("div",{className:"account-header",children:[(0,h.jsx)("h1",{children:"My Account"}),(0,h.jsxs)("div",{className:"account-balance",children:[(0,h.jsx)("span",{className:"balance-label",children:"Balance:"}),(0,h.jsxs)("span",{className:"balance-amount",children:["$",(l.balance||0).toFixed(2)]})]})]}),(0,h.jsxs)("div",{className:"account-tabs",children:[(0,h.jsx)("button",{className:"account-tab ".concat("profile"===n?"active":""),onClick:()=>o("profile"),children:"Profile"}),(0,h.jsx)("button",{className:"account-tab ".concat("deposit"===n?"active":""),onClick:()=>o("deposit"),children:"Deposit"}),(0,h.jsx)("button",{className:"account-tab ".concat("withdraw"===n?"active":""),onClick:()=>o("withdraw"),children:"Withdraw"}),(0,h.jsx)("button",{className:"account-tab ".concat("history"===n?"active":""),onClick:()=>o("history"),children:"Transaction History"})]}),(0,h.jsxs)("div",{className:"account-content",children:["profile"===n&&(0,h.jsxs)("div",{className:"profile-section",children:[(0,h.jsx)("h2",{children:"Profile Information"}),u?(0,h.jsx)("p",{children:"Loading profile..."}):p?(0,h.jsx)("p",{className:"error-message",children:p}):(0,h.jsxs)("div",{className:"profile-form",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Username"}),(0,h.jsx)("input",{type:"text",value:l.username||"",readOnly:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Email"}),(0,h.jsx)("input",{type:"email",value:l.email||"",readOnly:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"First Name"}),(0,h.jsx)("input",{type:"text",value:l.firstName||"",readOnly:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Last Name"}),(0,h.jsx)("input",{type:"text",value:l.lastName||"",readOnly:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Phone Number"}),(0,h.jsx)("input",{type:"text",value:l.phoneNumber||"",readOnly:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Address"}),(0,h.jsx)("input",{type:"text",value:l.address||"",readOnly:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Member Since"}),(0,h.jsx)("input",{type:"text",value:l.createdAt?new Date(l.createdAt).toLocaleDateString():"",readOnly:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Lifetime Winnings"}),(0,h.jsx)("input",{type:"text",value:"$".concat((l.lifetimeWinnings||0).toFixed(2)),readOnly:!0})]})]})]}),"deposit"===n&&(0,h.jsx)(x,{}),"withdraw"===n&&(0,h.jsxs)("div",{className:"withdraw-section",children:[(0,h.jsx)("h2",{children:"Withdraw Funds"}),(0,h.jsx)("div",{className:"crypto-withdraw",children:(0,h.jsxs)("form",{onSubmit:async n=>{n.preventDefault();const s=parseFloat(v);if(s&&N&&s<=(e.balance||0))try{const n=await r.A.withdraw({userId:e.id,amount:s,currency:j,walletAddress:N}),c=(0,t.A)((0,t.A)({},e),{},{balance:(e.balance||0)-s});a((0,i.gV)(c)),localStorage.setItem("user",JSON.stringify((0,t.A)((0,t.A)({},JSON.parse(localStorage.getItem("user"))),{},{user:c}))),alert(n.data.message),f(""),b("")}catch(p){var c,o;y((null===(c=p.response)||void 0===c||null===(o=c.data)||void 0===o?void 0:o.message)||"Withdrawal failed")}else alert("Insufficient balance or invalid amount")},children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Select Cryptocurrency"}),(0,h.jsx)("select",{value:j,onChange:e=>g(e.target.value),className:"crypto-select",children:[{value:"bitcoin",label:"Bitcoin (BTC)",icon:"\u20bf"},{value:"ethereum",label:"Ethereum (ETH)",icon:"\u039e"},{value:"litecoin",label:"Litecoin (LTC)",icon:"\u0141"},{value:"usdt",label:"Tether (USDT)",icon:"\u20ae"},{value:"bnb",label:"Binance Coin (BNB)",icon:"BNB"}].map(e=>(0,h.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value))})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Withdrawal Amount (USD)"}),(0,h.jsx)("input",{type:"number",value:v,onChange:e=>f(e.target.value),placeholder:"Enter amount",min:"20",max:e.balance||0,step:"0.01",required:!0}),(0,h.jsxs)("small",{children:["Available: $",(e.balance||0).toFixed(2)]})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Withdrawal Address"}),(0,h.jsx)("input",{type:"text",value:N,onChange:e=>b(e.target.value),placeholder:"Enter your wallet address",required:!0})]}),(0,h.jsxs)("div",{className:"withdraw-info",children:[(0,h.jsx)("p",{children:"\u26a0\ufe0f Minimum withdrawal: $20"}),(0,h.jsx)("p",{children:"\u26a0\ufe0f Withdrawals are processed within 24 hours"}),(0,h.jsx)("p",{children:"\u26a0\ufe0f Network fees may apply"})]}),(0,h.jsx)("button",{type:"submit",className:"withdraw-btn",children:"Request Withdrawal"})]})})]}),"history"===n&&(0,h.jsxs)("div",{className:"history-section",children:[(0,h.jsx)("h2",{children:"Transaction History"}),(0,h.jsx)("div",{className:"transaction-list",children:(0,h.jsxs)("div",{className:"no-transactions",children:[(0,h.jsx)("p",{children:"No transactions yet"}),(0,h.jsx)("p",{children:"Your deposit and withdrawal history will appear here"})]})})]})]})]})}},7790:()=>{}}]);
//# sourceMappingURL=124.3ff6916e.chunk.js.map