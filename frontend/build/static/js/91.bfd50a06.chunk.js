"use strict";(self.webpackChunkween_sports_betting=self.webpackChunkween_sports_betting||[]).push([[91],{1091:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(5043),l=s(7304),n=s(9379),i=s(3910),o=s(7929),r=s(6058),c=s(3216),d=s(6305),h=s(579);const u=()=>{const[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0),[r,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),[b,v]=(0,a.useState)({leagueName:"",sport:"",homeTeam:"",awayTeam:"",startTime:"",status:"upcoming",homeScore:null,awayScore:null,odds:{},videoUrl:"",videoPosterUrl:""}),[j,g]=(0,a.useState)(!1),[y,f]=(0,a.useState)(""),[N,w]=(0,a.useState)(""),[k,S]=(0,a.useState)(""),[A,C]=(0,a.useState)(""),[U,_]=(0,a.useState)(""),[D,T]=(0,a.useState)(!1),[L,M]=(0,a.useState)([]),[P,W]=(0,a.useState)([]),[B,E]=(0,a.useState)(!1),[I,F]=(0,a.useState)(""),[R,O]=(0,a.useState)("");(0,a.useEffect)(()=>{H(),q()},[]);const H=async()=>{try{o(!0);const e=await d.A.getAllMatches();t(e.data.matches)}catch(e){c("Failed to fetch matches."),console.error(e)}finally{o(!1)}},q=async()=>{try{const e=await d.A.getLeagues();l(e.data)}catch(e){c("Failed to fetch leagues.")}};(0,a.useEffect)(()=>{let t=j?y:b.leagueName;if(!t)return S(""),void C("");const s=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),a=t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,4);S(s);const l=e.filter(e=>e.leagueId===s&&e.externalId&&e.externalId.startsWith(a));let n=1;if(l.length>0){const e=l.map(e=>{const t=e.externalId.match(/_(\d+)$/);return t?parseInt(t[1],10):0});n=Math.max(...e)+1}C("".concat(a,"_").concat(String(n).padStart(3,"0")))},[b.leagueName,y,j,e]);const V=e=>{const{name:t,value:s}=e.target;v((0,n.A)((0,n.A)({},b),{},{[t]:s}))},$=e=>{const{name:t,value:s}=e.target;v((0,n.A)((0,n.A)({},b),{},{odds:(0,n.A)((0,n.A)({},b.odds),{},{[t]:s})}))},z=()=>{m(!1),p(null)};return i?(0,h.jsx)("div",{className:"text-white",children:"Loading matches..."}):r?(0,h.jsxs)("div",{className:"text-red-500",children:["Error: ",r]}):(0,h.jsxs)("div",{className:"admin-table-container",children:[(0,h.jsxs)("div",{className:"table-header",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,h.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Manage Matches"}),(0,h.jsx)("button",{onClick:()=>{p(null),v({leagueName:"",sport:"",homeTeam:"",awayTeam:"",startTime:"",status:"upcoming",homeScore:null,awayScore:null,odds:{},videoUrl:"",videoPosterUrl:""}),g(!1),f(""),m(!0)},className:"btn-export",children:"+ Add New Match"})]}),(0,h.jsxs)("div",{className:"search-filter",children:[(0,h.jsx)("input",{type:"text",placeholder:"Search by team or league...",value:U,onChange:e=>_(e.target.value),className:"search-input"}),(0,h.jsxs)("select",{value:R,onChange:e=>O(e.target.value),className:"search-input",children:[(0,h.jsx)("option",{value:"",children:"All Status"}),(0,h.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,h.jsx)("option",{value:"live",children:"Live"}),(0,h.jsx)("option",{value:"finished",children:"Finished"}),(0,h.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,h.jsx)("option",{value:"postponed",children:"Postponed"})]}),(0,h.jsx)("button",{type:"submit",onClick:t=>{if(t.preventDefault(),T(!0),!U.trim()&&!R)return void M([]);const a=U.toLowerCase();M(e.filter(e=>{var t,l,n;const i=(null===(t=s.find(t=>t.leagueId===e.leagueId))||void 0===t?void 0:t.name)||e.leagueName||"",o=!a||(null===(l=e.homeTeam)||void 0===l?void 0:l.toLowerCase().includes(a))||(null===(n=e.awayTeam)||void 0===n?void 0:n.toLowerCase().includes(a))||i.toLowerCase().includes(a),r=!R||e.status===R;return o&&r}))},className:"btn-refresh",children:"Search"}),(0,h.jsx)("button",{type:"button",onClick:()=>{_(""),T(!0),M(e)},className:"btn-refresh",children:"Show All"}),D&&(0,h.jsx)("button",{type:"button",onClick:()=>{_(""),O(""),T(!1),M([])},className:"btn-cancel",children:"Clear"})]})]}),(0,h.jsx)("div",{className:"mb-4 p-4 bg-gray-800 rounded-lg",children:(0,h.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"text-2xl font-bold text-green-400",children:e.length}),(0,h.jsx)("div",{className:"text-sm text-gray-300",children:"Total Matches"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:e.filter(e=>"upcoming"===e.status).length}),(0,h.jsx)("div",{className:"text-sm text-gray-300",children:"Upcoming"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:e.filter(e=>"live"===e.status).length}),(0,h.jsx)("div",{className:"text-sm text-gray-300",children:"Live"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"text-2xl font-bold text-red-400",children:e.filter(e=>"finished"===e.status).length}),(0,h.jsx)("div",{className:"text-sm text-gray-300",children:"Finished"})]})]})}),(0,h.jsx)("div",{className:"overflow-x-auto",children:0===(D?L:e).length?(0,h.jsx)("div",{className:"text-center py-8 text-gray-300",children:D?"No matches found for your search.":'No matches found. Click "Show All" to view all matches.'}):(0,h.jsxs)("table",{className:"admin-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:(0,h.jsx)("input",{type:"checkbox",checked:B,onChange:t=>(t=>{if(t){const t=(D?L:e).map(e=>e._id);W(t),E(!0)}else W([]),E(!1)})(t.target.checked)})}),(0,h.jsx)("th",{children:"Sport"}),(0,h.jsx)("th",{children:"Match"}),(0,h.jsx)("th",{children:"League"}),(0,h.jsx)("th",{children:"Start Time"}),(0,h.jsx)("th",{children:"Status"}),(0,h.jsx)("th",{children:"Score"}),(0,h.jsx)("th",{children:"Odds"}),(0,h.jsx)("th",{children:"Actions"})]})}),(0,h.jsx)("tbody",{children:(D?L:e).map(e=>{var t;return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:(0,h.jsx)("input",{type:"checkbox",checked:P.includes(e._id),onChange:t=>{return s=e._id,void(t.target.checked?W(e=>[...e,s]):(W(e=>e.filter(e=>e!==s)),E(!1)));var s}})}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"sport-badge",children:e.sport})}),(0,h.jsx)("td",{children:(0,h.jsx)("div",{className:"match-info",children:(0,h.jsxs)("div",{className:"teams",children:[e.homeTeam," vs ",e.awayTeam]})})}),(0,h.jsx)("td",{children:(0,h.jsx)("div",{className:"league",children:(null===(t=e.leagueId)||void 0===t?void 0:t.name)||"N/A"})}),(0,h.jsxs)("td",{children:[(0,h.jsx)("div",{className:"text-sm",children:new Date(e.startTime).toLocaleDateString()}),(0,h.jsx)("div",{className:"text-xs text-gray-400",children:new Date(e.startTime).toLocaleTimeString()})]}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"status-badge ".concat(e.status),children:e.status})}),(0,h.jsx)("td",{children:null!==e.homeScore?"".concat(e.homeScore," - ").concat(e.awayScore):"N/A"}),(0,h.jsx)("td",{children:(0,h.jsx)("div",{className:"odds-preview",children:e.odds&&Object.keys(e.odds).length>0?(0,h.jsx)("span",{className:"text-green-400 text-sm",children:"\u2713 Set"}):(0,h.jsx)("span",{className:"text-gray-400 text-sm",children:"Not set"})})}),(0,h.jsx)("td",{children:(0,h.jsxs)("div",{className:"action-buttons",children:[(0,h.jsx)("button",{onClick:()=>(e=>{var t;p(e),v({leagueName:(null===(t=s.find(t=>t.leagueId===e.leagueId))||void 0===t?void 0:t.name)||"",sport:e.sport,homeTeam:e.homeTeam,awayTeam:e.awayTeam,startTime:e.startTime.slice(0,16),status:e.status,homeScore:e.homeScore,awayScore:e.awayScore,odds:e.odds||{},videoUrl:e.videoUrl||"",videoPosterUrl:e.videoPosterUrl||""}),g(!1),f(""),m(!0)})(e),className:"btn-edit",children:"Edit"}),(0,h.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this match?"))try{await d.A.deleteMatch(e),H()}catch(t){c("Failed to delete match."),console.error(t)}})(e._id),className:"btn-cancel",children:"Delete"})]})})]},e._id)})})]})}),P.length>0&&(0,h.jsx)("div",{className:"bulk-actions",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("span",{className:"text-white",children:[P.length," match(es) selected"]}),(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsxs)("select",{value:I,onChange:e=>F(e.target.value),className:"bg-gray-700 text-white px-3 py-2 rounded border border-gray-600",children:[(0,h.jsx)("option",{value:"",children:"Select Action"}),(0,h.jsx)("option",{value:"status-upcoming",children:"Set Status: Upcoming"}),(0,h.jsx)("option",{value:"status-live",children:"Set Status: Live"}),(0,h.jsx)("option",{value:"status-finished",children:"Set Status: Finished"}),(0,h.jsx)("option",{value:"status-cancelled",children:"Set Status: Cancelled"}),(0,h.jsx)("option",{value:"delete",children:"Delete Matches"})]}),(0,h.jsx)("button",{onClick:async()=>{if(I&&0!==P.length)try{const e=P.map(e=>{switch(I){case"delete":return d.A.deleteMatch(e);case"status-upcoming":return d.A.updateMatch(e,{status:"upcoming"});case"status-live":return d.A.updateMatch(e,{status:"live"});case"status-finished":return d.A.updateMatch(e,{status:"finished"});case"status-cancelled":return d.A.updateMatch(e,{status:"cancelled"});default:return Promise.resolve()}});await Promise.all(e),w("".concat(I," action completed for ").concat(P.length," matches")),W([]),E(!1),F(""),H(),setTimeout(()=>w(""),3e3)}catch(r){console.error("Bulk action failed:",r),w("Bulk action failed"),setTimeout(()=>w(""),3e3)}},disabled:!I,className:"btn-export disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply Action"}),(0,h.jsx)("button",{onClick:()=>{W([]),E(!1),F("")},className:"btn-cancel",children:"Clear Selection"})]})]})}),u&&(0,h.jsx)("div",{className:"modal-overlay",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h3",{children:x?"Edit Match":"Add New Match"}),(0,h.jsx)("button",{className:"modal-close",onClick:z,children:"\xd7"})]}),(0,h.jsxs)("div",{className:"modal-body",children:[N&&(0,h.jsx)("div",{className:"mb-4 text-green-400 text-sm",children:N}),(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={leagueName:(j?y:b.leagueName)||"",teams:{home:b.homeTeam||"Home",away:b.awayTeam||"Away"},startTime:b.startTime||(new Date).toISOString(),odds:b.odds&&Object.keys(b.odds).length>0?b.odds:{},sport:(b.sport||"football").toLowerCase(),status:b.status||"upcoming",homeScore:b.homeScore||0,awayScore:b.awayScore||0,videoUrl:b.videoUrl||void 0,videoPosterUrl:b.videoPosterUrl||void 0};if(x)await d.A.updateMatch(x._id,e),H(),z();else{var t;const s=await d.A.addMatch(e),a=null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.id;a?(p({_id:a}),w("Match saved. You can now upload the video/poster."),H()):(H(),z())}j&&(g(!1),f(""),q())}catch(s){c("Failed to save match."),console.error(s)}},className:"space-y-4",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"League:"}),j?(0,h.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,h.jsx)("input",{type:"text",value:y,onChange:e=>f(e.target.value),placeholder:"Enter new league name",required:!0}),(0,h.jsx)("button",{type:"button",className:"btn-cancel",onClick:()=>{g(!1),f("")},children:"Cancel"})]}):(0,h.jsx)("div",{className:"flex gap-2",children:(0,h.jsxs)("select",{name:"leagueName",value:b.leagueName,onChange:e=>{"__add_new__"===e.target.value?(g(!0),v((0,n.A)((0,n.A)({},b),{},{leagueName:""}))):v((0,n.A)((0,n.A)({},b),{},{leagueName:e.target.value}))},required:!0,children:[(0,h.jsx)("option",{value:"",children:"Select League"}),s.map(e=>(0,h.jsx)("option",{value:e.name,children:e.name},e._id)),(0,h.jsx)("option",{value:"__add_new__",children:"+ Add New League"})]})})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Match Video (MP4/WebM)"}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Video URL:"}),(0,h.jsx)("input",{type:"url",name:"videoUrl",placeholder:"https://your-backend-url.onrender.com/uploads/videos/your-video.mp4",value:b.videoUrl,onChange:V})]}),(0,h.jsx)("div",{className:"flex items-end gap-2",children:(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsx)("label",{className:"block text-white text-sm font-bold mb-2",children:"Or upload video file:"}),(0,h.jsx)("input",{type:"file",accept:"video/mp4,video/webm,video/ogg",disabled:!1,onChange:async e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;const a=new FormData;if(a.append("video",s,s.name),null!==x&&void 0!==x&&x._id)try{const e=await d.A.uploadMatchVideo(x._id,a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoUrl:e.data.videoUrl}))}catch(c){try{const e=await d.A.uploadMatchVideoFallback(x._id,a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoUrl:e.data.videoUrl}))}catch(h){try{const e=await d.A.uploadVideoTemp(a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoUrl:e.data.videoUrl}))}catch(u){try{const e=await d.A.uploadVideoTempFallback(a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoUrl:e.data.videoUrl}))}catch(m){var l,i;const e=(null===m||void 0===m||null===(l=m.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.error)||(null===m||void 0===m?void 0:m.message)||"Failed to upload video";alert(e),console.error("Video upload error:",m)}}}}else try{const e=await d.A.uploadVideoTemp(a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoUrl:e.data.videoUrl}))}catch(c){try{const e=await d.A.uploadVideoTempFallback(a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoUrl:e.data.videoUrl}))}catch(h){var o,r;const e=(null===h||void 0===h||null===(o=h.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.error)||(null===h||void 0===h?void 0:h.message)||"Failed to upload video";alert(e),console.error("Video upload error:",h)}}},className:"block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-gray-600 file:text-white hover:file:bg-gray-700"}),(0,h.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"You can upload before or after saving; the URL is stored with the match."})]})})]})]}),(0,h.jsx)("div",{className:"md:col-span-2",children:(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-white text-sm font-bold mb-2",children:"Poster URL (thumbnail):"}),(0,h.jsx)("input",{type:"url",name:"videoPosterUrl",placeholder:"https://your-backend-url.onrender.com/uploads/posters/poster.jpg",value:b.videoPosterUrl,onChange:V,className:"shadow appearance-none border rounded w-full py-2 px-3 text-black leading-tight focus:outline-none focus:shadow-outline bg-white border-black"})]}),(0,h.jsx)("div",{className:"flex items-end gap-2",children:(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsx)("label",{className:"block text-white text-sm font-bold mb-2",children:"Or upload poster image:"}),(0,h.jsx)("input",{type:"file",accept:"image/*",disabled:!1,onChange:async e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;const a=new FormData;if(a.append("poster",s,s.name),null!==x&&void 0!==x&&x._id)try{const e=await d.A.uploadMatchPoster(x._id,a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoPosterUrl:e.data.videoPosterUrl}))}catch(c){try{const e=await d.A.uploadMatchPosterFallback(x._id,a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoPosterUrl:e.data.videoPosterUrl}))}catch(h){try{const e=await d.A.uploadPosterTemp(a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoPosterUrl:e.data.videoPosterUrl}))}catch(u){try{const e=await d.A.uploadPosterTempFallback(a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoPosterUrl:e.data.videoPosterUrl}))}catch(m){var l,i;const e=(null===m||void 0===m||null===(l=m.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.error)||(null===m||void 0===m?void 0:m.message)||"Failed to upload poster";alert(e),console.error("Poster upload error:",m)}}}}else try{const e=await d.A.uploadPosterTemp(a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoPosterUrl:e.data.videoPosterUrl}))}catch(c){try{const e=await d.A.uploadPosterTempFallback(a);v(t=>(0,n.A)((0,n.A)({},t),{},{videoPosterUrl:e.data.videoPosterUrl}))}catch(h){var o,r;const e=(null===h||void 0===h||null===(o=h.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.error)||(null===h||void 0===h?void 0:h.message)||"Failed to upload poster";alert(e),console.error("Poster upload error:",h)}}},className:"block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-gray-600 file:text-white hover:file:bg-gray-700"}),(0,h.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"You can upload before or after saving; the URL is stored with the match."})]})})]})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-white text-sm font-bold mb-2",children:"League ID (auto):"}),(0,h.jsx)("input",{type:"text",value:k,readOnly:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-black leading-tight focus:outline-none focus:shadow-outline bg-white border-black"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-white text-sm font-bold mb-2",children:"External ID (auto):"}),(0,h.jsx)("input",{type:"text",value:A,readOnly:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-black leading-tight focus:outline-none focus:shadow-outline bg-white border-black"})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Sport:"}),(0,h.jsx)("input",{type:"text",name:"sport",value:b.sport,onChange:V,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Home Team:"}),(0,h.jsx)("input",{type:"text",name:"homeTeam",value:b.homeTeam,onChange:V,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Away Team:"}),(0,h.jsx)("input",{type:"text",name:"awayTeam",value:b.awayTeam,onChange:V,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Start Time:"}),(0,h.jsx)("input",{type:"datetime-local",name:"startTime",value:b.startTime,onChange:V,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Status:"}),(0,h.jsxs)("select",{name:"status",value:b.status,onChange:V,children:[(0,h.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,h.jsx)("option",{value:"live",children:"Live"}),(0,h.jsx)("option",{value:"finished",children:"Finished"}),(0,h.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,h.jsx)("option",{value:"postponed",children:"Postponed"})]})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Home Score:"}),(0,h.jsx)("input",{type:"number",name:"homeScore",value:b.homeScore||"",onChange:V})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Away Score:"}),(0,h.jsx)("input",{type:"number",name:"awayScore",value:b.awayScore||"",onChange:V})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Odds (Optional)"}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Home Win:"}),(0,h.jsx)("input",{type:"number",step:"0.01",name:"homeWin",value:b.odds.homeWin||"",onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Draw:"}),(0,h.jsx)("input",{type:"number",step:"0.01",name:"draw",value:b.odds.draw||"",onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Away Win:"}),(0,h.jsx)("input",{type:"number",step:"0.01",name:"awayWin",value:b.odds.awayWin||"",onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Total (Over/Under Line):"}),(0,h.jsx)("input",{type:"number",step:"0.01",name:"total",value:b.odds.total||"",onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Over Odds:"}),(0,h.jsx)("input",{type:"number",step:"0.01",name:"over",value:b.odds.over||"",onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Under Odds:"}),(0,h.jsx)("input",{type:"number",step:"0.01",name:"under",value:b.odds.under||"",onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Handicap Line:"}),(0,h.jsx)("input",{type:"number",step:"0.01",name:"handicapLine",value:b.odds.handicapLine||"",onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Home Handicap Odds:"}),(0,h.jsx)("input",{type:"number",step:"0.01",name:"homeHandicap",value:b.odds.homeHandicap||"",onChange:$})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Away Handicap Odds:"}),(0,h.jsx)("input",{type:"number",step:"0.01",name:"awayHandicap",value:b.odds.awayHandicap||"",onChange:$})]})]})]}),(0,h.jsxs)("div",{className:"form-actions",children:[(0,h.jsx)("button",{type:"button",onClick:z,className:"btn-cancel",children:"Cancel"}),(0,h.jsx)("button",{type:"submit",className:"btn-export",children:x?"Update Match":"Add Match"})]})]})]})]})})]})},m=e=>{let{user:t,onEdit:s,onDelete:l,onBlock:n,onUnblock:i}=e;const[o,r]=(0,a.useState)(!1),c=(e,t)=>{r(!1),t()};return(0,h.jsxs)("div",{className:"relative inline-block text-left",children:[(0,h.jsxs)("button",{onClick:()=>r(!o),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center transition-colors duration-200",children:["Actions",(0,h.jsx)("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>r(!1)}),(0,h.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-gray-700 rounded-md shadow-lg z-20 border border-gray-600",children:(0,h.jsxs)("div",{className:"py-1",children:[(0,h.jsxs)("button",{onClick:()=>c(0,()=>s(t)),className:"flex items-center w-full px-4 py-2 text-sm text-gray-200 hover:bg-gray-600 hover:text-white transition-colors duration-150",children:[(0,h.jsx)("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit User"]}),t.isBlocked?(0,h.jsxs)("button",{onClick:()=>c(0,()=>i(t._id)),className:"flex items-center w-full px-4 py-2 text-sm text-green-400 hover:bg-gray-600 hover:text-green-300 transition-colors duration-150",children:[(0,h.jsx)("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})}),"Unblock User"]}):(0,h.jsxs)("button",{onClick:()=>c(0,()=>n(t._id)),className:"flex items-center w-full px-4 py-2 text-sm text-orange-400 hover:bg-gray-600 hover:text-orange-300 transition-colors duration-150",children:[(0,h.jsx)("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Block User"]}),(0,h.jsx)("div",{className:"border-t border-gray-600 my-1"}),(0,h.jsxs)("button",{onClick:()=>c(0,()=>l(t._id)),className:"flex items-center w-full px-4 py-2 text-sm text-red-400 hover:bg-gray-600 hover:text-red-300 transition-colors duration-150",children:[(0,h.jsx)("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete User"]})]})})]})]})},x=()=>{const[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null),[r,c]=(0,a.useState)(!1),[u,x]=(0,a.useState)(null),[p,b]=(0,a.useState)({username:"",email:"",isAdmin:!1,balance:0,isBlocked:!1});(0,a.useEffect)(()=>{v()},[]);const v=async()=>{try{l(!0);const e=await d.A.getAdminUsers();t(e.data.users||[])}catch(e){o("Failed to fetch users."),console.error(e),t([])}finally{l(!1)}},j=e=>{const{name:t,value:s,type:a,checked:l}=e.target;b((0,n.A)((0,n.A)({},p),{},{[t]:"checkbox"===a?l:s}))},g=async e=>{if(window.confirm("Are you sure you want to delete this user?"))try{await d.A.deleteUser(e),v()}catch(t){o("Failed to delete user."),console.error(t)}},y=e=>{x(e),b({username:e.username,email:e.email,isAdmin:e.isAdmin,balance:e.balance,isBlocked:e.isBlocked}),c(!0)},f=async e=>{if(window.confirm("Are you sure you want to block this user?"))try{await d.A.blockUser(e),v()}catch(t){o("Failed to block user."),console.error(t)}},N=async e=>{if(window.confirm("Are you sure you want to unblock this user?"))try{await d.A.unblockUser(e),v()}catch(t){o("Failed to unblock user."),console.error(t)}},w=()=>{c(!1),x(null)};return s?(0,h.jsx)("div",{className:"text-white",children:"Loading users..."}):i?(0,h.jsxs)("div",{className:"text-red-500",children:["Error: ",i]}):(0,h.jsxs)("div",{className:"p-6 bg-gray-800 rounded-lg shadow-md",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,h.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Manage Users"}),(0,h.jsx)("button",{onClick:v,disabled:s,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-bold py-2 px-4 rounded",children:s?"Loading...":"Refresh"})]}),(0,h.jsx)("div",{className:"overflow-x-auto",children:(0,h.jsxs)("table",{className:"min-w-full bg-gray-700 rounded-lg overflow-hidden shadow-xl",children:[(0,h.jsx)("thead",{className:"bg-gradient-to-r from-gray-600 to-gray-500",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"py-4 px-4 text-left text-sm font-semibold text-gray-100 uppercase tracking-wider",children:"Username"}),(0,h.jsx)("th",{className:"py-4 px-4 text-left text-sm font-semibold text-gray-100 uppercase tracking-wider",children:"Email"}),(0,h.jsx)("th",{className:"py-4 px-4 text-left text-sm font-semibold text-gray-100 uppercase tracking-wider",children:"Role"}),(0,h.jsx)("th",{className:"py-4 px-4 text-left text-sm font-semibold text-gray-100 uppercase tracking-wider",children:"Balance"}),(0,h.jsx)("th",{className:"py-4 px-4 text-left text-sm font-semibold text-gray-100 uppercase tracking-wider",children:"Status"}),(0,h.jsx)("th",{className:"py-4 px-4 text-left text-sm font-semibold text-gray-100 uppercase tracking-wider",children:"Actions"})]})}),(0,h.jsx)("tbody",{className:"text-gray-300",children:e.map(e=>(0,h.jsxs)("tr",{className:"border-t border-gray-600 hover:bg-gray-600 transition-colors duration-200 cursor-pointer",children:[(0,h.jsx)("td",{className:"py-4 px-4 font-medium",children:e.username}),(0,h.jsx)("td",{className:"py-4 px-4",children:e.email}),(0,h.jsx)("td",{className:"py-4 px-4",children:(0,h.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.isAdmin?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isAdmin?"Admin":"User"})}),(0,h.jsxs)("td",{className:"py-4 px-4 font-mono",children:["$",e.balance.toFixed(2)]}),(0,h.jsx)("td",{className:"py-4 px-4",children:(0,h.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.isBlocked?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:[(0,h.jsx)("span",{className:"w-2 h-2 rounded-full mr-1.5 ".concat(e.isBlocked?"bg-red-400":"bg-green-400")}),e.isBlocked?"Blocked":"Active"]})}),(0,h.jsx)("td",{className:"py-4 px-4",children:(0,h.jsx)(m,{user:e,onEdit:y,onDelete:g,onBlock:f,onUnblock:N})})]},e._id))})]})}),r&&(0,h.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,h.jsxs)("div",{className:"bg-gray-800 p-8 rounded-lg shadow-xl max-w-md w-full",children:[(0,h.jsx)("h3",{className:"text-2xl font-bold mb-6 text-white",children:"Edit User"}),(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await d.A.updateUser(u._id,p),v(),w()}catch(t){o("Failed to update user."),console.error(t)}},className:"grid grid-cols-1 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-black text-sm font-bold mb-2",children:"Username:"}),(0,h.jsx)("input",{type:"text",name:"username",value:p.username,onChange:j,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600",required:!0})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-black text-sm font-bold mb-2",children:"Email:"}),(0,h.jsx)("input",{type:"email",name:"email",value:p.email,onChange:j,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600",required:!0})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-black text-sm font-bold mb-2",children:"Balance:"}),(0,h.jsx)("input",{type:"number",step:"0.01",name:"balance",value:p.balance,onChange:j,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-700 border-gray-600",required:!0})]}),(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)("input",{type:"checkbox",name:"isAdmin",checked:p.isAdmin,onChange:j,className:"mr-2 leading-tight"}),(0,h.jsx)("label",{className:"text-black text-sm font-bold",children:"Is Admin"})]}),(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)("input",{type:"checkbox",name:"isBlocked",checked:p.isBlocked,onChange:j,className:"mr-2 leading-tight"}),(0,h.jsx)("label",{className:"text-black text-sm font-bold",children:"Is Blocked"})]}),(0,h.jsxs)("div",{className:"flex justify-end mt-6",children:[(0,h.jsx)("button",{type:"button",onClick:w,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded mr-2",children:"Cancel"}),(0,h.jsx)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Update User"})]})]})]})})]})};const p=new class{constructor(){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.listeners=new Map,this.isConnected=!1}connect(e){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)try{const t={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000"}.REACT_APP_WS_URL||"ws://localhost:5000/ws";this.ws=new WebSocket("".concat(t,"?token=").concat(e)),this.ws.onopen=()=>{console.log("WebSocket connected"),this.isConnected=!0,this.reconnectAttempts=0,this.emit("connected")},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleMessage(t)}catch(t){console.error("Error parsing WebSocket message:",t)}},this.ws.onclose=e=>{console.log("WebSocket disconnected:",e.code,e.reason),this.isConnected=!1,this.emit("disconnected",e),1e3!==e.code&&this.reconnectAttempts<this.maxReconnectAttempts&&this.scheduleReconnect()},this.ws.onerror=e=>{console.error("WebSocket error:",e),this.emit("error",e)}}catch(t){console.error("Error creating WebSocket connection:",t),this.emit("error",t)}}scheduleReconnect(){this.reconnectAttempts++;const e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log("Scheduling WebSocket reconnection attempt ".concat(this.reconnectAttempts," in ").concat(e,"ms")),setTimeout(()=>{if(this.reconnectAttempts<this.maxReconnectAttempts){const e=localStorage.getItem("token");e&&this.connect(e)}},e)}handleMessage(e){const{type:t,payload:s}=e;switch(t){case"bet_status_update":this.emit("betStatusUpdate",s);break;case"match_result_update":this.emit("matchResultUpdate",s);break;case"odds_change":this.emit("oddsChange",s);break;case"live_matches_update":this.emit("liveMatchesUpdate",s);break;case"pong":break;default:console.log("Unknown WebSocket message type:",t)}}send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.ws&&this.ws.readyState===WebSocket.OPEN){const s=JSON.stringify({type:e,payload:t});this.ws.send(s)}else console.warn("WebSocket is not connected. Cannot send message:",e)}subscribeToMatch(e){this.send("subscribe_match",{matchId:e})}unsubscribeFromMatch(e){this.send("unsubscribe_match",{matchId:e})}subscribeToUserBets(e){this.send("subscribe_user_bets",{userId:e})}unsubscribeFromUserBets(e){this.send("unsubscribe_user_bets",{userId:e})}subscribeToLiveMatches(){this.send("subscribe_live_matches")}unsubscribeFromLiveMatches(){this.send("unsubscribe_live_matches")}requestLiveMatches(){this.send("request_live_matches")}requestBetStatus(e){this.send("request_bet_status",{betId:e})}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{this.ws&&this.ws.readyState===WebSocket.OPEN?this.send("ping"):this.ws&&this.ws.readyState===WebSocket.CLOSED&&(console.log("[WS] Connection closed during heartbeat, attempting reconnect"),this.reconnect())},2e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){if(this.listeners.has(e)){const s=this.listeners.get(e),a=s.indexOf(t);a>-1&&s.splice(a,1)}}emit(e,t){this.listeners.has(e)&&this.listeners.get(e).forEach(e=>{try{e(t)}catch(s){console.error("Error in WebSocket event listener:",s)}})}disconnect(){this.ws&&(this.ws.close(1e3,"User initiated disconnect"),this.ws=null),this.isConnected=!1,this.stopHeartbeat()}getConnectionStatus(){return{isConnected:this.isConnected,readyState:this.ws?this.ws.readyState:null,reconnectAttempts:this.reconnectAttempts}}};l.t1.register(l.PP,l.kc,l.E8,l.FN,l.No,l.Bs,l.hE,l.m_,l.s$);const b=()=>{var e,t,s,l,m,b,v,j,g,y,f,N;const w=(0,a.useRef)(null),k=(0,a.useRef)(null),S=(0,a.useRef)(null),[A,C]=(0,a.useState)("dashboard"),[U,_]=(0,a.useState)(!1),D=(0,c.zy)(),[T,L]=(0,a.useState)({totalBets:0,totalDeposits:0,activeUsers:0,activeMatches:0}),[M,P]=(0,a.useState)([]),[W,B]=(0,a.useState)(!1),[E,I]=(0,a.useState)(""),[F,R]=(0,a.useState)(""),[O,H]=(0,a.useState)(1),[q,V]=(0,a.useState)(1),[$,z]=(0,a.useState)([]),[J,G]=(0,a.useState)(!1),[K,Y]=(0,a.useState)(""),[Q,X]=(0,a.useState)({open:!1,bet:null}),[Z,ee]=(0,a.useState)({open:!1,bet:null}),[te,se]=(0,a.useState)(null),[ae,le]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if("bet-management"===A){console.log("[ADMIN DASHBOARD] Connecting to WebSocket for real-time bet updates..."),p.connect();const e=e=>{console.log("[ADMIN DASHBOARD] Received bet status update:",e),P(t=>t.map(t=>t._id===e.betId?(0,n.A)((0,n.A)({},t),{},{status:e.status,actualWin:e.actualWin||t.actualWin,updatedAt:(new Date).toISOString()}):t)),se(new Date)},t=e=>{console.log("[ADMIN DASHBOARD] Received new bet:",e),a(e)&&(P(t=>[e,...t]),se(new Date))},s=e=>{console.log("[ADMIN DASHBOARD] Received bet update:",e),P(t=>t.map(t=>t._id===e.betId||t._id===e._id?(0,n.A)((0,n.A)({},t),e):t)),se(new Date)},a=e=>{if(F&&e.status!==F)return!1;if(E){var t,s,a,l,n,i,o,r,c;const d=E.toLowerCase();if(!((null===(t=e.userId)||void 0===t||null===(s=t.username)||void 0===s?void 0:s.toLowerCase().includes(d))||(null===(a=e.userId)||void 0===a||null===(l=a.email)||void 0===l?void 0:l.toLowerCase().includes(d))||(null===(n=e.homeTeam)||void 0===n?void 0:n.toLowerCase().includes(d))||(null===(i=e.awayTeam)||void 0===i?void 0:i.toLowerCase().includes(d))||(null===(o=e.league)||void 0===o?void 0:o.toLowerCase().includes(d))||(null===(r=e.market)||void 0===r?void 0:r.toLowerCase().includes(d))||(null===(c=e.selection)||void 0===c?void 0:c.toLowerCase().includes(d))))return!1}return!0};return p.on("bet_status_update",e),p.on("new_bet",t),p.on("bet_update",s),()=>{console.log("[ADMIN DASHBOARD] Cleaning up WebSocket listeners..."),p.off("bet_status_update",e),p.off("new_bet",t),p.off("bet_update",s)}}},[A,F,E]);const ne={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Bets",data:[12,19,3,5,2,3,15],backgroundColor:"#00ff88"}]},ie={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Deposits",data:[5e3,4e3,6e3,3e3,7e3,6500],borderColor:"#00ff88",fill:!1},{label:"Withdrawals",data:[2e3,3e3,2500,4e3,3500,3e3],borderColor:"#ff4444",fill:!1}]},oe={labels:["New","Active","Inactive"],datasets:[{data:[300,500,200],backgroundColor:["#00ff88","#00cc6a","#888888"]}]},[re,ce]=(0,a.useState)([]),[de,he]=(0,a.useState)(!1),[ue,me]=(0,a.useState)(null),[xe,pe]=(0,a.useState)(!1),[be,ve]=(0,a.useState)(null),[je,ge]=(0,a.useState)({image:"",caption1:"",caption2:"",buttonText:"",buttonUrl:""}),[ye,fe]=(0,a.useState)(!1),[Ne,we]=(0,a.useState)(null),ke=async()=>{try{he(!0);const e=await d.A.getHeroSlides();ce(e.data)}catch(e){me("Failed to load hero slides")}finally{he(!1)}};(0,a.useEffect)(()=>{"hero"===A&&ke()},[A]);const Se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;ve(e),ge(e?(0,n.A)({},e):{image:"",caption1:"",caption2:"",buttonText:"",buttonUrl:""}),pe(!0),we(null)},Ae=()=>{pe(!1),ve(null)},Ce=e=>{const{name:t,value:s}=e.target;ge((0,n.A)((0,n.A)({},je),{},{[t]:s}))},Ue=async e=>{const t=e.target.files[0];if(!t)return;fe(!0),we(null);const s=new FormData;s.append("image",t);try{const e=await d.A.uploadHeroImage(s);ge((0,n.A)((0,n.A)({},je),{},{image:e.data.imageUrl}))}catch(a){we("Image upload failed")}finally{fe(!1)}},_e=async e=>{e.preventDefault();try{be?await d.A.updateHeroSlide(be._id,je):await d.A.createHeroSlide(je),ke(),Ae()}catch(t){we("Failed to save hero slide")}};(0,a.useEffect)(()=>{const e=async()=>{try{console.log("[ADMIN DASHBOARD] Fetching statistics...");const e=await d.A.getAdminDashboardStats();if(e.data.success){const t=e.data.data;console.log("[ADMIN DASHBOARD] Statistics received:",t),L({totalBets:t.totalBets||0,totalDeposits:t.totalDeposits||0,totalWithdrawals:t.totalWithdrawals||0,activeUsers:t.activeUsers||0,activeMatches:(t.liveMatches||0)+(t.upcomingMatches||0),totalUsers:t.totalUsers||0,totalRevenue:t.totalRevenue||0,netProfit:t.netProfit||0,betWinRate:t.betWinRate||0,todayDeposits:t.todayDeposits||0,todayWithdrawals:t.todayWithdrawals||0,weekDeposits:t.weekDeposits||0,weekWithdrawals:t.weekWithdrawals||0,monthDeposits:t.monthDeposits||0,monthWithdrawals:t.monthWithdrawals||0})}}catch(e){console.error("Error fetching dashboard stats:",e)}};e();const t=setInterval(e,3e5);return()=>clearInterval(t)},[]),(0,a.useEffect)(()=>{"bet-management"===A&&De()},[A]);const De=async()=>{try{var e;B(!0);const t=new URLSearchParams((0,n.A)((0,n.A)({page:O,limit:50},E&&{search:E}),F&&{status:F})),s=await d.A.get("/admin/bets?".concat(t));P(s.data.bets||[]),V((null===(e=s.data.pagination)||void 0===e?void 0:e.pages)||1)}catch(t){console.error("Failed to fetch bets:",t),P([])}finally{B(!1)}},Te=e=>{e?(z(M.map(e=>e._id)),G(!0)):(z([]),G(!1))},Le=async()=>{if(K&&0!==$.length)try{const e=await d.A.put("/admin/bets/bulk/status",{betIds:$,status:K});e.data.success&&(alert(e.data.message),z([]),G(!1),Y(""),De())}catch(e){console.error("Bulk action failed:",e),alert("Failed to perform bulk action")}},Me=()=>{if(!M||0===M.length)return void alert("No bets available to export");const e=M.map(e=>{var t,s;return{"Bet ID":e._id,User:(null===(t=e.userId)||void 0===t?void 0:t.username)||"N/A",Email:(null===(s=e.userId)||void 0===s?void 0:s.email)||"N/A",Match:"".concat(e.homeTeam," vs ").concat(e.awayTeam),League:e.league,Market:e.market,Selection:e.selection,Stake:e.stake,Odds:e.odds,"Potential Win":e.potentialWin,Status:e.status,Created:new Date(e.createdAt).toLocaleString()}});if(0===e.length)return void alert("No valid bet data to export");const t=[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n"),s=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download="bets-export-".concat((new Date).toISOString().split("T")[0],".csv"),l.click(),window.URL.revokeObjectURL(a)};(0,a.useEffect)(()=>()=>{const e=e=>{var t;const s=(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.chartInstance)||(null===e||void 0===e?void 0:e.current);if(s&&"function"===typeof s.destroy)try{s.destroy()}catch(a){}};e(w),e(k),e(S)},[]),(0,a.useEffect)(()=>{const e=new URLSearchParams(D.search).get("tab");e&&C(e)},[D.search]),(0,a.useEffect)(()=>{"bet-management"===A&&De()},[A,O,E,F]),(0,a.useEffect)(()=>{let e;return"bet-management"===A&&(le(!0),De().finally(()=>le(!1)),se(new Date),e=setInterval(()=>{console.log("[BET MANAGEMENT] Auto-refreshing bet data..."),le(!0),De().finally(()=>{le(!1),se(new Date)})},3e4)),()=>{e&&clearInterval(e)}},[A]),(0,a.useEffect)(()=>{const e=setTimeout(()=>{"bet-management"===A&&(H(1),De())},500);return()=>clearTimeout(e)},[E,F]);return(0,h.jsxs)("div",{className:"admin-dashboard ".concat(U?"collapsed":""),children:[(0,h.jsxs)("div",{className:"admin-sidebar",children:[(0,h.jsxs)("div",{className:"sidebar-header",children:[(0,h.jsx)("h2",{children:"Admin Panel"}),(0,h.jsx)("button",{className:"collapse-btn",onClick:()=>_(!U),children:U?">":"<"})]}),(0,h.jsx)("nav",{className:"sidebar-nav",children:(0,h.jsxs)("ul",{children:[(0,h.jsxs)("li",{className:"dashboard"===A?"active":"",onClick:()=>C("dashboard"),children:[(0,h.jsx)(i.g,{icon:o.gK3}),!U&&(0,h.jsx)("span",{children:"Dashboard"})]}),(0,h.jsxs)("li",{className:"user-management"===A?"active":"",onClick:()=>C("user-management"),children:[(0,h.jsx)(i.g,{icon:o.gdJ}),!U&&(0,h.jsx)("span",{children:"User Management"})]}),(0,h.jsxs)("li",{className:"bet-management"===A?"active":"",onClick:()=>C("bet-management"),children:[(0,h.jsx)(i.g,{icon:o.ymQ}),!U&&(0,h.jsx)("span",{children:"Bet Management"})]}),(0,h.jsxs)("li",{className:"match-management"===A?"active":"",onClick:()=>C("match-management"),children:[(0,h.jsx)(i.g,{icon:o.U7U}),!U&&(0,h.jsx)("span",{children:"Match Management"})]}),(0,h.jsxs)("li",{className:"hero"===A?"active":"",onClick:()=>C("hero"),children:[(0,h.jsx)(i.g,{icon:o.h8M}),!U&&(0,h.jsx)("span",{children:"Hero Section"})]}),(0,h.jsxs)("li",{className:"settings"===A?"active":"",onClick:()=>C("settings"),children:[(0,h.jsx)(i.g,{icon:o.dB}),!U&&(0,h.jsx)("span",{children:"Settings"})]})]})})]}),(0,h.jsxs)("div",{className:"admin-main-content",children:["dashboard"===A&&(0,h.jsxs)("div",{className:"admin-dashboard-content",children:[(0,h.jsxs)("div",{className:"kpi-cards",children:[(0,h.jsxs)("div",{className:"kpi-card",children:[(0,h.jsx)("h3",{children:"Total Bets"}),(0,h.jsx)("p",{children:(T.totalBets||0).toLocaleString()}),(0,h.jsxs)("small",{children:["Win Rate: ",T.betWinRate||0,"%"]})]}),(0,h.jsxs)("div",{className:"kpi-card",children:[(0,h.jsx)("h3",{children:"Total Deposits"}),(0,h.jsxs)("p",{children:["$",(T.totalDeposits||0).toLocaleString()]}),(0,h.jsxs)("small",{children:["Today: $",(T.todayDeposits||0).toLocaleString()]})]}),(0,h.jsxs)("div",{className:"kpi-card",children:[(0,h.jsx)("h3",{children:"Active Users"}),(0,h.jsx)("p",{children:(T.activeUsers||0).toLocaleString()}),(0,h.jsxs)("small",{children:["Total: ",(T.totalUsers||0).toLocaleString()]})]}),(0,h.jsxs)("div",{className:"kpi-card",children:[(0,h.jsx)("h3",{children:"Active Matches"}),(0,h.jsx)("p",{children:(T.activeMatches||0).toLocaleString()}),(0,h.jsx)("small",{children:"Live & Upcoming"})]}),(0,h.jsxs)("div",{className:"kpi-card",children:[(0,h.jsx)("h3",{children:"Total Revenue"}),(0,h.jsxs)("p",{children:["$",(T.totalRevenue||0).toLocaleString()]}),(0,h.jsxs)("small",{children:["Net Profit: $",(T.netProfit||0).toLocaleString()]})]}),(0,h.jsxs)("div",{className:"kpi-card",children:[(0,h.jsx)("h3",{children:"This Month"}),(0,h.jsxs)("p",{children:["$",(T.monthDeposits||0).toLocaleString()]}),(0,h.jsx)("small",{children:"Deposits"})]})]}),(0,h.jsxs)("div",{className:"charts",children:[(0,h.jsxs)("div",{className:"chart-container",style:{maxHeight:"300px"},children:[(0,h.jsx)("h3",{children:"Betting Activity"}),(0,h.jsx)(r.yP,{ref:w,data:ne,options:{responsive:!0,maintainAspectRatio:!1}})]}),(0,h.jsxs)("div",{className:"chart-container",style:{maxHeight:"300px"},children:[(0,h.jsx)("h3",{children:"Deposits & Withdrawals"}),(0,h.jsx)(r.N1,{ref:k,data:ie,options:{responsive:!0,maintainAspectRatio:!1}})]}),(0,h.jsxs)("div",{className:"chart-container",style:{maxHeight:"300px"},children:[(0,h.jsx)("h3",{children:"User Distribution"}),(0,h.jsx)(r.nu,{ref:S,data:oe,options:{responsive:!0,maintainAspectRatio:!1}})]})]})]}),"user-management"===A&&(0,h.jsx)(x,{}),"bet-management"===A&&(0,h.jsxs)("div",{className:"admin-table-container",children:[(0,h.jsxs)("div",{className:"table-header",children:[(0,h.jsxs)("div",{className:"search-filter",children:[(0,h.jsx)(i.g,{icon:o.MjD}),(0,h.jsx)("input",{type:"text",placeholder:"Search bets...",value:E,onChange:e=>I(e.target.value)}),(0,h.jsx)(i.g,{icon:o.mRM}),(0,h.jsxs)("select",{value:F,onChange:e=>R(e.target.value),children:[(0,h.jsx)("option",{value:"",children:"All Status"}),(0,h.jsx)("option",{value:"pending",children:"Pending"}),(0,h.jsx)("option",{value:"won",children:"Won"}),(0,h.jsx)("option",{value:"lost",children:"Lost"}),(0,h.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,h.jsx)("option",{value:"void",children:"Void"})]}),(0,h.jsx)("button",{className:"btn-refresh",onClick:De,disabled:W,children:W?"Loading...":"Refresh"})]}),(0,h.jsxs)("div",{className:"real-time-indicator",children:[(0,h.jsx)("div",{className:"refresh-status",children:ae?(0,h.jsxs)("span",{className:"refreshing",children:[(0,h.jsx)("span",{className:"spinner"}),"Auto-refreshing..."]}):(0,h.jsxs)("span",{className:"idle",children:[(0,h.jsx)("span",{className:"status-dot"}),"Live Data"]})}),te&&(0,h.jsxs)("div",{className:"last-refresh",children:["Last updated: ",te.toLocaleTimeString()]})]})]}),W?(0,h.jsxs)("div",{className:"loading-container",children:[(0,h.jsx)("div",{className:"loading-spinner"}),(0,h.jsx)("p",{children:"Loading bets..."})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("table",{className:"admin-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:(0,h.jsx)("input",{type:"checkbox",checked:J,onChange:Te})}),(0,h.jsx)("th",{children:"Bet ID"}),(0,h.jsx)("th",{children:"User"}),(0,h.jsx)("th",{children:"Match"}),(0,h.jsx)("th",{children:"Market"}),(0,h.jsx)("th",{children:"Selection"}),(0,h.jsx)("th",{children:"Stake"}),(0,h.jsx)("th",{children:"Odds"}),(0,h.jsx)("th",{children:"Potential Win"}),(0,h.jsx)("th",{children:"Status"}),(0,h.jsx)("th",{children:"Created"}),(0,h.jsx)("th",{children:"Actions"})]})}),(0,h.jsx)("tbody",{children:M.map(e=>{var t,s;return(0,h.jsxs)("tr",{className:$.includes(e._id)?"selected":"",children:[(0,h.jsx)("td",{children:(0,h.jsx)("input",{type:"checkbox",checked:$.includes(e._id),onChange:t=>{return s=e._id,void(t.target.checked?z(e=>[...e,s]):(z(e=>e.filter(e=>e!==s)),G(!1)));var s}})}),(0,h.jsx)("td",{children:e._id.slice(-8)}),(0,h.jsx)("td",{children:e.userId?(0,h.jsxs)("div",{className:"user-info",children:[(0,h.jsx)("div",{className:"username",children:e.userId.username}),(0,h.jsx)("div",{className:"email",children:e.userId.email})]}):"N/A"}),(0,h.jsx)("td",{children:(0,h.jsxs)("div",{className:"match-info",children:[(0,h.jsxs)("div",{className:"teams",children:[e.homeTeam," vs ",e.awayTeam]}),(0,h.jsx)("div",{className:"league",children:e.league})]})}),(0,h.jsx)("td",{children:e.market}),(0,h.jsx)("td",{children:e.selection}),(0,h.jsxs)("td",{children:["$",null===(t=e.stake)||void 0===t?void 0:t.toFixed(2)]}),(0,h.jsx)("td",{children:e.odds}),(0,h.jsxs)("td",{children:["$",null===(s=e.potentialWin)||void 0===s?void 0:s.toFixed(2)]}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"status-badge ".concat(e.status),children:e.status})}),(0,h.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,h.jsx)("td",{children:(0,h.jsxs)("div",{className:"action-buttons",children:[(0,h.jsx)("button",{className:"btn-edit",onClick:()=>(e=>{X({open:!0,bet:e})})(e),children:"Edit"}),(0,h.jsx)("button",{className:"btn-settle",onClick:()=>(e=>{ee({open:!0,bet:e})})(e),children:"Settle"}),(0,h.jsx)("button",{className:"btn-cancel",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to cancel this bet?"))try{(await d.A.put("/admin/bets/".concat(e,"/status"),{status:"cancelled"})).data.success&&(alert("Bet cancelled successfully"),De())}catch(t){console.error("Failed to cancel bet:",t),alert("Failed to cancel bet")}})(e._id),disabled:"pending"!==e.status,children:"Cancel"})]})})]},e._id)})})]}),$.length>0&&(0,h.jsxs)("div",{className:"bulk-actions",children:[(0,h.jsxs)("span",{children:[$.length," bets selected"]}),(0,h.jsxs)("select",{value:K,onChange:e=>Y(e.target.value),children:[(0,h.jsx)("option",{value:"",children:"Bulk Actions"}),(0,h.jsx)("option",{value:"won",children:"Mark as Won"}),(0,h.jsx)("option",{value:"lost",children:"Mark as Lost"}),(0,h.jsx)("option",{value:"void",children:"Mark as Void"}),(0,h.jsx)("option",{value:"cancelled",children:"Cancel"})]}),(0,h.jsx)("button",{className:"btn-apply-bulk",onClick:Le,disabled:!K,children:"Apply"})]}),(0,h.jsxs)("div",{className:"table-footer",children:[(0,h.jsxs)("div",{className:"pagination",children:[(0,h.jsx)("button",{onClick:()=>H(e=>Math.max(1,e-1)),disabled:1===O,children:"Previous"}),(0,h.jsxs)("span",{children:["Page ",O," of ",q]}),(0,h.jsx)("button",{onClick:()=>H(e=>Math.min(q,e+1)),disabled:O===q,children:"Next"})]}),(0,h.jsx)("button",{className:"btn-export",onClick:Me,children:"Export to CSV"})]})]})]}),"match-management"===A&&(0,h.jsx)(u,{}),"hero"===A&&(0,h.jsxs)("div",{className:"admin-hero-section",children:[(0,h.jsx)("h2",{children:"Hero Section Management"}),(0,h.jsx)("button",{onClick:()=>Se(),className:"btn-edit",style:{marginBottom:16},children:"Add New Slide"}),de?(0,h.jsx)("p",{children:"Loading..."}):ue?(0,h.jsx)("p",{style:{color:"red"},children:ue}):(0,h.jsxs)("table",{className:"admin-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Image"}),(0,h.jsx)("th",{children:"Caption 1"}),(0,h.jsx)("th",{children:"Caption 2"}),(0,h.jsx)("th",{children:"Button Text"}),(0,h.jsx)("th",{children:"Button URL"}),(0,h.jsx)("th",{children:"Actions"})]})}),(0,h.jsx)("tbody",{children:re.map(e=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.image&&(0,h.jsx)("img",{src:e.image,alt:"hero",style:{width:80,height:40,objectFit:"cover"}})}),(0,h.jsx)("td",{children:e.caption1}),(0,h.jsx)("td",{children:e.caption2}),(0,h.jsx)("td",{children:e.buttonText}),(0,h.jsx)("td",{children:(0,h.jsx)("a",{href:e.buttonUrl,target:"_blank",rel:"noopener noreferrer",children:e.buttonUrl})}),(0,h.jsxs)("td",{children:[(0,h.jsx)("button",{className:"btn-edit",onClick:()=>Se(e),children:"Edit"}),(0,h.jsx)("button",{className:"btn-delete",onClick:()=>(async e=>{if(window.confirm("Delete this hero slide?"))try{await d.A.deleteHeroSlide(e),ke()}catch(t){me("Failed to delete hero slide")}})(e._id),children:"Delete"})]})]},e._id))})]}),xe&&(0,h.jsx)("div",{className:"modal-overlay",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsx)("h3",{children:be?"Edit Slide":"Add Slide"}),(0,h.jsxs)("form",{onSubmit:_e,children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Image"}),je.image&&(0,h.jsx)("img",{src:je.image,alt:"preview",style:{width:120,height:60,objectFit:"cover",display:"block",marginBottom:8}}),(0,h.jsx)("input",{type:"file",accept:"image/*",onChange:Ue,disabled:ye}),ye&&(0,h.jsx)("span",{children:"Uploading..."}),Ne&&(0,h.jsx)("span",{style:{color:"red"},children:Ne})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Caption 1"}),(0,h.jsx)("input",{type:"text",name:"caption1",value:je.caption1,onChange:Ce,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Caption 2"}),(0,h.jsx)("input",{type:"text",name:"caption2",value:je.caption2,onChange:Ce,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Button Text"}),(0,h.jsx)("input",{type:"text",name:"buttonText",value:je.buttonText,onChange:Ce,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Button URL"}),(0,h.jsx)("input",{type:"text",name:"buttonUrl",value:je.buttonUrl,onChange:Ce,required:!0})]}),(0,h.jsxs)("div",{className:"form-actions",children:[(0,h.jsx)("button",{type:"submit",className:"btn-edit",children:be?"Update":"Create"}),(0,h.jsx)("button",{type:"button",className:"btn-delete",onClick:Ae,children:"Cancel"})]})]})]})})]}),"settings"===A&&(0,h.jsxs)("div",{className:"admin-settings-container",children:[(0,h.jsxs)("div",{className:"settings-section",children:[(0,h.jsx)("h3",{children:"Payment Gateways"}),(0,h.jsxs)("div",{className:"toggle-group",children:[(0,h.jsxs)("label",{children:[(0,h.jsx)("input",{type:"checkbox"})," Stripe"]}),(0,h.jsxs)("label",{children:[(0,h.jsx)("input",{type:"checkbox"})," PayPal"]}),(0,h.jsxs)("label",{children:[(0,h.jsx)("input",{type:"checkbox"})," Bank Transfer"]})]})]}),(0,h.jsxs)("div",{className:"settings-section",children:[(0,h.jsx)("h3",{children:"Email Templates"}),(0,h.jsxs)("div",{className:"template-selector",children:[(0,h.jsxs)("select",{children:[(0,h.jsx)("option",{children:"Welcome Email"}),(0,h.jsx)("option",{children:"Deposit Confirmation"}),(0,h.jsx)("option",{children:"Withdrawal Request"})]}),(0,h.jsx)("button",{className:"btn-edit-template",children:"Edit Template"})]})]}),(0,h.jsxs)("div",{className:"settings-section",children:[(0,h.jsx)("h3",{children:"System Configuration"}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Default Currency"}),(0,h.jsxs)("select",{children:[(0,h.jsx)("option",{children:"USD"}),(0,h.jsx)("option",{children:"EUR"}),(0,h.jsx)("option",{children:"GBP"})]})]}),(0,h.jsx)("div",{className:"form-group",children:(0,h.jsxs)("label",{children:[(0,h.jsx)("input",{type:"checkbox"})," Enable GDPR Compliance"]})})]})]})]}),Q.open&&(0,h.jsx)("div",{className:"modal-overlay",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h3",{children:"Edit Bet"}),(0,h.jsx)("button",{className:"modal-close",onClick:()=>X({open:!1,bet:null}),children:"\xd7"})]}),(0,h.jsx)("div",{className:"modal-body",children:(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),s=parseFloat(t.get("stake")),a=parseFloat(t.get("odds")),l=t.get("selection"),n=t.get("market");try{(await d.A.put("/admin/bets/".concat(Q.bet._id),{stake:s,odds:a,selection:l,market:n})).data.success&&(alert("Bet updated successfully"),X({open:!1,bet:null}),De())}catch(r){var i,o;console.error("Failed to update bet:",r),alert("Failed to update bet: "+((null===(i=r.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.error)||r.message))}},children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Stake:"}),(0,h.jsx)("input",{name:"stake",type:"number",step:"0.01",min:"0.01",defaultValue:null===(e=Q.bet)||void 0===e?void 0:e.stake,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Odds:"}),(0,h.jsx)("input",{name:"odds",type:"number",step:"0.01",min:"1.01",defaultValue:null===(t=Q.bet)||void 0===t?void 0:t.odds,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Selection:"}),(0,h.jsx)("input",{name:"selection",type:"text",defaultValue:null===(s=Q.bet)||void 0===s?void 0:s.selection,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Market:"}),(0,h.jsx)("input",{name:"market",type:"text",defaultValue:null===(l=Q.bet)||void 0===l?void 0:l.market,required:!0})]}),(0,h.jsxs)("div",{className:"form-actions",children:[(0,h.jsx)("button",{type:"button",onClick:()=>X({open:!1,bet:null}),children:"Cancel"}),(0,h.jsx)("button",{type:"submit",children:"Save Changes"})]})]})})]})}),Z.open&&(0,h.jsx)("div",{className:"modal-overlay",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h3",{children:"Settle Bet"}),(0,h.jsx)("button",{className:"modal-close",onClick:()=>ee({open:!1,bet:null}),children:"\xd7"})]}),(0,h.jsx)("div",{className:"modal-body",children:(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),s=t.get("status"),a=parseFloat(t.get("actualWin"))||0;try{(await d.A.put("/admin/bets/".concat(Z.bet._id,"/status"),{status:s,actualWin:"won"===s?a:0})).data.success&&(alert("Bet ".concat(s," successfully")),ee({open:!1,bet:null}),De())}catch(i){var l,n;console.error("Failed to settle bet:",i),alert("Failed to settle bet: "+((null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.error)||i.message))}},children:[(0,h.jsxs)("div",{className:"bet-info",children:[(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"User:"})," ",null===(m=Z.bet)||void 0===m||null===(b=m.userId)||void 0===b?void 0:b.username]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Match:"})," ",null===(v=Z.bet)||void 0===v?void 0:v.homeTeam," vs ",null===(j=Z.bet)||void 0===j?void 0:j.awayTeam]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Selection:"})," ",null===(g=Z.bet)||void 0===g?void 0:g.selection]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Stake:"})," $",null===(y=Z.bet)||void 0===y?void 0:y.stake]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Potential Win:"})," $",null===(f=Z.bet)||void 0===f?void 0:f.potentialWin]})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Status:"}),(0,h.jsxs)("select",{name:"status",required:!0,children:[(0,h.jsx)("option",{value:"won",children:"Won"}),(0,h.jsx)("option",{value:"lost",children:"Lost"}),(0,h.jsx)("option",{value:"void",children:"Void"})]})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{style:{color:"black"},children:"Actual Win Amount:"}),(0,h.jsx)("input",{name:"actualWin",type:"number",step:"0.01",min:"0",placeholder:"Enter actual win amount",defaultValue:null===(N=Z.bet)||void 0===N?void 0:N.potentialWin}),(0,h.jsx)("small",{style:{color:"#666",fontSize:"12px"},children:"Leave empty or 0 for lost/void bets. For won bets, enter the actual payout amount."})]}),(0,h.jsxs)("div",{className:"form-actions",children:[(0,h.jsx)("button",{type:"button",onClick:()=>ee({open:!1,bet:null}),children:"Cancel"}),(0,h.jsx)("button",{type:"submit",children:"Settle Bet"})]})]})})]})})]})};l.t1.register(l.PP,l.kc,l.E8,l.FN,l.No,l.Bs,l.hE,l.m_,l.s$);const v=()=>(0,h.jsx)(b,{})}}]);
//# sourceMappingURL=91.bfd50a06.chunk.js.map